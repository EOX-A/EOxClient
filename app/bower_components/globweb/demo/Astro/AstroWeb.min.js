'use strict';var o = !0, q = null, u = !1;
function aa(a) {
  return function() {
    return this[a]
  }
}
var v, ba = ba || {};
var ca = Array;
function x(a) {
  var b = new ca(3);
  a && (b[0] = a[0], b[1] = a[1], b[2] = a[2]);
  return b
}
function da(a, b, c) {
  if(!c || a == c) {
    return a[0] += b[0], a[1] += b[1], a[2] += b[2], a
  }
  c[0] = a[0] + b[0];
  c[1] = a[1] + b[1];
  c[2] = a[2] + b[2];
  return c
}
function y(a, b, c) {
  if(!c || a == c) {
    return a[0] -= b[0], a[1] -= b[1], a[2] -= b[2], a
  }
  c[0] = a[0] - b[0];
  c[1] = a[1] - b[1];
  c[2] = a[2] - b[2];
  return c
}
function E(a, b, c) {
  if(!c || a == c) {
    return a[0] *= b, a[1] *= b, a[2] *= b, a
  }
  c[0] = a[0] * b;
  c[1] = a[1] * b;
  c[2] = a[2] * b;
  return c
}
function F(a, b) {
  b || (b = a);
  var c = a[0], d = a[1], e = a[2], f = Math.sqrt(c * c + d * d + e * e);
  if(!f) {
    return b[0] = 0, b[1] = 0, b[2] = 0, b
  }
  if(1 == f) {
    return b[0] = c, b[1] = d, b[2] = e, b
  }
  f = 1 / f;
  b[0] = c * f;
  b[1] = d * f;
  b[2] = e * f;
  return b
}
function ea(a, b, c) {
  c || (c = a);
  var d = a[0], e = a[1], a = a[2], f = b[0], g = b[1], b = b[2];
  c[0] = e * b - a * g;
  c[1] = a * f - d * b;
  c[2] = d * g - e * f;
  return c
}
function fa(a) {
  var b = a[0], c = a[1], a = a[2];
  return Math.sqrt(b * b + c * c + a * a)
}
function ga(a, b) {
  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2]
}
function G() {
  return new ca(16)
}
function H(a, b) {
  b || (b = a);
  var c = a[0], d = a[1], e = a[2], f = a[3], g = a[4], j = a[5], i = a[6], h = a[7], l = a[8], m = a[9], k = a[10], n = a[11], p = a[12], r = a[13], t = a[14], s = a[15], w = c * j - d * g, z = c * i - e * g, D = c * h - f * g, B = d * i - e * j, A = d * h - f * j, P = e * h - f * i, Q = l * r - m * p, R = l * t - k * p, S = l * s - n * p, T = m * t - k * r, U = m * s - n * r, V = k * s - n * t, C = 1 / (w * V - z * U + D * T + B * S - A * R + P * Q);
  b[0] = (j * V - i * U + h * T) * C;
  b[1] = (-d * V + e * U - f * T) * C;
  b[2] = (r * P - t * A + s * B) * C;
  b[3] = (-m * P + k * A - n * B) * C;
  b[4] = (-g * V + i * S - h * R) * C;
  b[5] = (c * V - e * S + f * R) * C;
  b[6] = (-p * P + t * D - s * z) * C;
  b[7] = (l * P - k * D + n * z) * C;
  b[8] = (g * U - j * S + h * Q) * C;
  b[9] = (-c * U + d * S - f * Q) * C;
  b[10] = (p * A - r * D + s * w) * C;
  b[11] = (-l * A + m * D - n * w) * C;
  b[12] = (-g * T + j * R - i * Q) * C;
  b[13] = (c * T - d * R + e * Q) * C;
  b[14] = (-p * B + r * z - t * w) * C;
  b[15] = (l * B - m * z + k * w) * C
}
function I(a, b, c) {
  c || (c = a);
  var d = a[0], e = a[1], f = a[2], g = a[3], j = a[4], i = a[5], h = a[6], l = a[7], m = a[8], k = a[9], n = a[10], p = a[11], r = a[12], t = a[13], s = a[14], a = a[15], w = b[0], z = b[1], D = b[2], B = b[3], A = b[4], P = b[5], Q = b[6], R = b[7], S = b[8], T = b[9], U = b[10], V = b[11], C = b[12], pa = b[13], qa = b[14], b = b[15];
  c[0] = w * d + z * j + D * m + B * r;
  c[1] = w * e + z * i + D * k + B * t;
  c[2] = w * f + z * h + D * n + B * s;
  c[3] = w * g + z * l + D * p + B * a;
  c[4] = A * d + P * j + Q * m + R * r;
  c[5] = A * e + P * i + Q * k + R * t;
  c[6] = A * f + P * h + Q * n + R * s;
  c[7] = A * g + P * l + Q * p + R * a;
  c[8] = S * d + T * j + U * m + V * r;
  c[9] = S * e + T * i + U * k + V * t;
  c[10] = S * f + T * h + U * n + V * s;
  c[11] = S * g + T * l + U * p + V * a;
  c[12] = C * d + pa * j + qa * m + b * r;
  c[13] = C * e + pa * i + qa * k + b * t;
  c[14] = C * f + pa * h + qa * n + b * s;
  c[15] = C * g + pa * l + qa * p + b * a
}
function ha(a, b) {
  var c;
  c || (c = b);
  var d = b[0], e = b[1], f = b[2];
  c[0] = a[0] * d + a[4] * e + a[8] * f + a[12];
  c[1] = a[1] * d + a[5] * e + a[9] * f + a[13];
  c[2] = a[2] * d + a[6] * e + a[10] * f + a[14]
}
function ia(a, b, c) {
  c || (c = b);
  var d = b[0], e = b[1], f = b[2], b = b[3];
  c[0] = a[0] * d + a[4] * e + a[8] * f + a[12] * b;
  c[1] = a[1] * d + a[5] * e + a[9] * f + a[13] * b;
  c[2] = a[2] * d + a[6] * e + a[10] * f + a[14] * b;
  c[3] = a[3] * d + a[7] * e + a[11] * f + a[15] * b
}
function ja(a, b, c, d, e) {
  var a = c * Math.tan(a * Math.PI / 360), b = a * b, f = -b, g = -a;
  e || (e = G());
  var j = b - f, i = a - g, h = d - c;
  e[0] = 2 * c / j;
  e[1] = 0;
  e[2] = 0;
  e[3] = 0;
  e[4] = 0;
  e[5] = 2 * c / i;
  e[6] = 0;
  e[7] = 0;
  e[8] = (b + f) / j;
  e[9] = (a + g) / i;
  e[10] = -(d + c) / h;
  e[11] = -1;
  e[12] = 0;
  e[13] = 0;
  e[14] = -(2 * d * c) / h;
  e[15] = 0
}
function ka(a, b, c, d) {
  d || (d = G());
  var e = a[0], f = a[1], a = a[2], g = c[0], j = c[1], i = c[2], c = b[1], h = b[2];
  if(e == b[0] && f == c && a == h) {
    d[0] = 1, d[1] = 0, d[2] = 0, d[3] = 0, d[4] = 0, d[5] = 1, d[6] = 0, d[7] = 0, d[8] = 0, d[9] = 0, d[10] = 1, d[11] = 0, d[12] = 0, d[13] = 0, d[14] = 0
  }else {
    var l, m, k, n, c = e - b[0], h = f - b[1], b = a - b[2];
    n = 1 / Math.sqrt(c * c + h * h + b * b);
    c *= n;
    h *= n;
    b *= n;
    l = j * b - i * h;
    i = i * c - g * b;
    g = g * h - j * c;
    (n = Math.sqrt(l * l + i * i + g * g)) ? (n = 1 / n, l *= n, i *= n, g *= n) : g = i = l = 0;
    j = h * g - b * i;
    m = b * l - c * g;
    k = c * i - h * l;
    (n = Math.sqrt(j * j + m * m + k * k)) ? (n = 1 / n, j *= n, m *= n, k *= n) : k = m = j = 0;
    d[0] = l;
    d[1] = j;
    d[2] = c;
    d[3] = 0;
    d[4] = i;
    d[5] = m;
    d[6] = h;
    d[7] = 0;
    d[8] = g;
    d[9] = k;
    d[10] = b;
    d[11] = 0;
    d[12] = -(l * e + i * f + g * a);
    d[13] = -(j * e + m * f + k * a);
    d[14] = -(c * e + h * f + b * a)
  }
  d[15] = 1
}
;function la(a, b) {
  a.a.Kb = this;
  var c = b ? b.element : void 0;
  c && (this.element = "string" == typeof c ? document.getElementById(c) : c);
  this.bd = a.a.Vb;
  this.gd = b && b.verbose ? b.verbose : u;
  this.U = 0;
  var d = this;
  window.setInterval(function() {
    d.print()
  }, 1E3)
}
la.prototype.start = function(a) {
  this[a] = Date.now()
};
la.prototype.end = function(a) {
  var b = Date.now() - this[a], c = this["max_" + a] || -1;
  c < b && (c = b);
  var d = this["sum_" + a] || 0;
  this[a] = b;
  this["max_" + a] = c;
  this["sum_" + a] = d + b;
  "globalRenderTime" == a && this.U++
};
la.prototype.print = function() {
  if(0 < this.U) {
    var a = "";
    this.bd && (a += "FPS : " + this.U);
    a += "<br>Average render time : " + (this.sum_globalRenderTime / this.U).toFixed(2) + " ms";
    this.gd && (a += "<br>Average traverse tiles time : " + (this.sum_traverseTime / this.U).toFixed(2) + " ms", a += "<br>Average render tiles time : " + (this.sum_renderTime / this.U).toFixed(2) + " ms", a += "<br>Average generate tiles time : " + (this.sum_generateTime / this.U).toFixed(2) + " ms", a += "<br>Average request tiles time : " + (this.sum_requestTime / this.U).toFixed(2) + " ms", a += "<br>Max render time : " + this.max_globalRenderTime + " ms", a += "<br>Max traverse tiles time : " + 
    this.max_traverseTime + " ms", a += "<br>Max render tiles time : " + this.max_renderTime + " ms", a += "<br>Max generate tiles time : " + this.max_generateTime + " ms", a += "<br>Max request tiles time : " + this.max_requestTime + " ms");
    this.element.innerHTML = a;
    this.U = this.max_requestTime = this.max_generateTime = this.max_renderTime = this.max_traverseTime = this.max_globalRenderTime = this.sum_requestTime = this.sum_generateTime = this.sum_renderTime = this.sum_traverseTime = this.sum_globalRenderTime = 0
  }
};
function ma(a, b) {
  function c() {
  }
  c.prototype = a.prototype;
  b.prototype = new c;
  b.prototype.constructor = b
}
;function J(a, b, c, d) {
  this.Ya = b;
  this.ha = a;
  this.pa = d;
  this.Oa = c
}
J.prototype.zc = aa("pa");
J.prototype.Ac = aa("Ya");
J.prototype.Cc = aa("ha");
J.prototype.yc = aa("Oa");
function na(a, b) {
  a && (this.min = x(a));
  b && (this.max = x(b))
}
na.prototype.extend = function(a, b, c) {
  this.min ? (a < this.min[0] && (this.min[0] = a), b < this.min[1] && (this.min[1] = b), c < this.min[2] && (this.min[2] = c), a > this.max[0] && (this.max[0] = a), b > this.max[1] && (this.max[1] = b), c > this.max[2] && (this.max[2] = c)) : (this.min = x(), this.max = x(), this.min[0] = a, this.min[1] = b, this.min[2] = c, this.max[0] = a, this.max[1] = b, this.max[2] = c)
};
na.prototype.rb = function(a, b, c) {
  this.min || (this.min = x(), this.max = x());
  this.min[0] = a[0];
  this.min[1] = a[1];
  this.min[2] = a[2];
  this.max[0] = a[0];
  this.max[1] = a[1];
  this.max[2] = a[2];
  for(var d = c || 3, b = b || a.length;c < b;c += d) {
    for(var e = 0;3 > e;e++) {
      a[c + e] < this.min[e] && (this.min[e] = a[c + e]), a[c + e] > this.max[e] && (this.max[e] = a[c + e])
    }
  }
};
function oa(a) {
  var b = x();
  y(a.max, a.min, b);
  return 0.5 * fa(b)
}
;function ra(a) {
  a -= 1;
  return 1 - a * a
}
function sa(a, b, c, d) {
  d || (d = x());
  E(b, c, d);
  da(d, a, d);
  return d
}
function ta(a, b, c, d, e, f, g, j) {
  var i = (j - f) * (c - a) - (g - e) * (d - b);
  return 0 == i ? [-1, -1] : [((g - e) * (b - f) - (j - f) * (a - e)) / i, ((c - a) * (b - f) - (d - b) * (a - e)) / i]
}
function ua(a, b, c) {
  var d = K.n, a = y(a, c, x()), b = 2 * ga(b, a), a = b * b - 4 * (ga(a, a) - d * d);
  if(0 > a) {
    return-1
  }
  a = Math.sqrt(a);
  d = (-b - a) / 2;
  b = (-b + a) / 2;
  d > b && (a = d, d = b, b = a);
  return 0 > b ? -1 : 0 > d ? b : d
}
;function L() {
  this.lb = this.startTime = -1;
  this.c = q
}
L.prototype.start = function() {
  if(this.c && (-1 == this.startTime || -1 != this.lb)) {
    var a = Date.now();
    -1 == this.startTime ? this.startTime = a : (this.startTime = a - this.lb, this.lb = -1);
    this.c.ia.push(this);
    M(this.c.a)
  }
};
L.prototype.stop = function() {
  this.lb = this.startTime = -1;
  this.hc && this.hc();
  this.c.ia.splice(this.c.ia.indexOf(this), 1)
};
function va(a, b, c, d, e) {
  L.prototype.constructor.call(this);
  this.Y = [[0, b], [1, c]];
  this.duration = a;
  this.Ec = d;
  this.Hb = e
}
ma(L, va);
va.prototype.start = function() {
  L.prototype.start.call(this);
  this.Hb(this.Jb)
};
va.prototype.stop = function() {
  L.prototype.stop.call(this);
  this.Hb(this.tb)
};
va.prototype.update = function(a) {
  a = this.startTime != this.startTime + this.duration ? (a - this.startTime) / (this.startTime + this.duration - this.startTime) : 0;
  if(1 <= a) {
    this.stop()
  }else {
    for(var b = this.Y.length, c = 0;c < b && this.Y[c][0] < a;) {
      c++
    }
    c = Math.min(c, b - 1);
    b = Math.max(0, c - 1);
    a = this.Y[b][0] != this.Y[c][0] ? (a - this.Y[b][0]) / (this.Y[c][0] - this.Y[b][0]) : 0;
    a = this.Ec(a, this.Y[b][1], this.Y[c][1]);
    this.Hb(a)
  }
};
function wa(a, b) {
  L.prototype.constructor.call(this);
  this.o = [];
  this.duration = a;
  this.Ia = b
}
ma(L, wa);
function xa(a, b, c, d, e) {
  this.start = a;
  this.Jb = b;
  this.end = c;
  this.tb = d;
  this.Fc = e
}
function ya(a, b, c, d, e, f) {
  for(var g = a.o.length, j = 0;j < g && a.o[j].end <= b;) {
    j++
  }
  a.o.splice(j, 0, new xa(b, c, d, e, f))
}
wa.prototype.start = function() {
  L.prototype.start.call(this);
  this.Ia(this.o[0].Jb)
};
wa.prototype.stop = function() {
  L.prototype.stop.call(this);
  this.Ia(this.o[this.o.length - 1].tb)
};
wa.prototype.update = function(a) {
  a = this.startTime != this.startTime + this.duration ? (a - this.startTime) / (this.startTime + this.duration - this.startTime) : 0;
  if(1 <= a) {
    this.stop()
  }else {
    for(var b = this.o.length, c = 0;c < b && this.o[c].end < a;) {
      c++
    }
    c = Math.min(c, b - 1);
    a = this.o[c].start != this.o[c].end ? (a - this.o[c].start) / (this.o[c].end - this.o[c].start) : 0;
    a = this.o[c].Fc(a, this.o[c].Jb, this.o[c].tb);
    this.Ia(a)
  }
};
var K = {n:1, ib:1 / 6356752.3142, Sc:6356752.3142, ba:function(a, b) {
  b || (b = Array(3));
  var c = a[0] * Math.PI / 180, d = a[1] * Math.PI / 180, e = Math.cos(d), f = K.n + (2 < a.length ? K.ib * a[2] : 0);
  b[0] = f * Math.cos(c) * e;
  b[1] = f * Math.sin(c) * e;
  b[2] = f * Math.sin(d);
  return b
}, xa:function(a, b) {
  b || (b = Array(3));
  var c = Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2]), d = Math.asin(a[2] / c);
  b[0] = 180 * Math.atan2(a[1] / c, a[0] / c) / Math.PI;
  b[1] = 180 * d / Math.PI;
  b[2] = K.Sc * Math.abs(c - K.n);
  return b
}, nd:function(a, b) {
  b || (b = Array(3));
  var c = [];
  K.xa(a, c);
  K.Zb(c, b);
  return b
}, od:function(a, b) {
  b || (b = Array(3));
  var c = [];
  K.Yb(a, c);
  K.ba(c, b);
  return b
}, Yb:function(a, b) {
  b || (b = []);
  var c = a[0].split(" "), d = parseFloat(c[0]), e = parseFloat(c[1]), c = parseFloat(c[2]);
  b[0] = 15 * (d + e / 60 + c / 3600);
  180 < b[0] && (b[0] -= 360);
  var f = a[1].split(" "), d = parseFloat(f[0]), e = parseFloat(f[1]), c = parseFloat(f[2]);
  b[1] = ("-" == f[0][0] ? -1 : 1) * (Math.abs(d) + e / 60 + c / 3600);
  return b
}, Zb:function(a, b) {
  b || (b = []);
  var c = a[0];
  0 > c && (c += 360);
  var d = Math.abs(c / 15), c = Math.floor(d), d = 60 * (d - c), e = Math.floor(d);
  b[0] = c + " " + e + " " + 60 * (d - e);
  d = Math.abs(a[1]);
  c = Math.floor(d);
  d = 60 * (d - c);
  e = Math.floor(d);
  b[1] = (0 <= a[1] ? "" : "-") + "" + c + " " + e + " " + 60 * (d - e);
  return b
}, td:function(a, b) {
  b || (b = G());
  var c = a[0] * Math.PI / 180, d = a[1] * Math.PI / 180, d = [Math.cos(c) * Math.cos(d), Math.sin(c) * Math.cos(d), Math.sin(d)], c = [-Math.sin(c), Math.cos(c), 0], e = x();
  ea(d, c, e);
  b[0] = c[0];
  b[1] = c[1];
  b[2] = c[2];
  b[3] = 0;
  b[4] = e[0];
  b[5] = e[1];
  b[6] = e[2];
  b[7] = 0;
  b[8] = d[0];
  b[9] = d[1];
  b[10] = d[2];
  b[11] = 0;
  b[12] = 0;
  b[13] = 0;
  b[14] = 0;
  b[15] = 1;
  return b
}, sd:function(a, b) {
  b || (b = G());
  var c = a[0] * Math.PI / 180, d = a[1] * Math.PI / 180, d = [Math.cos(c) * Math.cos(d), Math.sin(c) * Math.cos(d), Math.sin(d)], c = [-Math.sin(c), Math.cos(c), 0], e = x();
  ea(d, c, e);
  var f = K.ba(a);
  b[0] = c[0];
  b[1] = c[1];
  b[2] = c[2];
  b[3] = 0;
  b[4] = e[0];
  b[5] = e[1];
  b[6] = e[2];
  b[7] = 0;
  b[8] = d[0];
  b[9] = d[1];
  b[10] = d[2];
  b[11] = 0;
  b[12] = f[0];
  b[13] = f[1];
  b[14] = f[2];
  b[15] = 1;
  return b
}, ud:function(a, b) {
  b[0] = a[0];
  b[1] = a[1];
  b[2] = a[2];
  return b
}, rd:function(a, b) {
  b[0] = a[4];
  b[1] = a[5];
  b[2] = a[6];
  return b
}, vd:function(a, b) {
  b[0] = a[8];
  b[1] = a[9];
  b[2] = a[10];
  return b
}};
function za() {
  this.m = x([0, 0, 0]);
  this.ua = 0
}
function Aa(a, b, c) {
  var d = [0, 0, 0], e = [], f = [];
  y(b, d, e);
  y(c, d, f);
  ea(e, f, a.m);
  F(a.m);
  a.ua = -ga(d, a.m)
}
za.prototype.h = function(a) {
  return a[0] * this.m[0] + a[1] * this.m[1] + a[2] * this.m[2] + this.ua
};
function Ba() {
  this.W = [new za, new za, new za, new za]
}
Ba.prototype.rb = function(a) {
  function b(a, b) {
    ia(a, b);
    b[0] /= b[3];
    b[1] /= b[3];
    b[2] /= b[3];
    return b
  }
  var c = G();
  H(a, c);
  var a = b(c, [-1, -1, -1, 1]), d = b(c, [-1, 1, -1, 1]), e = b(c, [1, 1, -1, 1]), c = b(c, [1, -1, -1, 1]);
  Aa(this.W[0], a, d);
  Aa(this.W[1], d, e);
  Aa(this.W[2], e, c);
  Aa(this.W[3], c, a)
};
function Ca(a, b, c) {
  for(var d = 0;4 > d;d++) {
    var e = b.W[d], f = e.m[0], g = e.m[1], j = e.m[2], i = e.ua, e = a.W[d];
    e.m[0] = c[0] * f + c[1] * g + c[2] * j + c[3] * i;
    e.m[1] = c[4] * f + c[5] * g + c[6] * j + c[7] * i;
    e.m[2] = c[8] * f + c[9] * g + c[10] * j + c[11] * i;
    e.ua = c[12] * f + c[13] * g + c[14] * j + c[15] * i
  }
}
;function Da(a) {
  this.Cd = a.shadersPath || "../shaders/";
  this.ed = a.tileErrorTreshold || 4;
  this.Aa = a.lighting || u;
  this.Vb = a.continuousRendering || u;
  var b = this.Kb = q;
  if(!a.canvas) {
    throw"GlobWeb : no canvas in options";
  }
  b = "string" == typeof a.canvas ? document.getElementById(a.canvas) : a.canvas;
  if(!b instanceof HTMLCanvasElement) {
    throw"GlobWeb : invalid canvas";
  }
  for(var c = ["webgl", "experimental-webgl", "webkit-3d", "moz-webgl"], d = q, e = 0;e < c.length && d == q;++e) {
    try {
      d = b.getContext(c[e], a.contextAttribs)
    }catch(f) {
    }
  }
  if(d == q) {
    throw"GlobWeb : WebGL context cannot be initialized";
  }
  a.backgroundColor ? (a = a.backgroundColor, d.clearColor(a[0], a[1], a[2], a[3])) : d.clearColor(0, 0, 0, 1);
  d.pixelStorei(d.UNPACK_COLORSPACE_CONVERSION_WEBGL, d.NONE);
  d.enable(d.DEPTH_TEST);
  d.enable(d.CULL_FACE);
  d.viewport(0, 0, b.width, b.height);
  a = G();
  c = G();
  ka([0, 0, 3], [0, 0, 0], [0, 1, 0], c);
  a[0] = c[0];
  a[1] = c[1];
  a[2] = c[2];
  a[3] = c[3];
  a[4] = c[4];
  a[5] = c[5];
  a[6] = c[6];
  a[7] = c[7];
  a[8] = c[8];
  a[9] = c[9];
  a[10] = c[10];
  a[11] = c[11];
  a[12] = c[12];
  a[13] = c[13];
  a[14] = c[14];
  a[15] = c[15];
  e = G();
  ja(60, b.width / b.height, 1E-5, 6, e);
  var g = new Ba;
  g.rb(e);
  this.u = c;
  this.L = a;
  this.fa = e;
  this.f = d;
  this.canvas = b;
  this.vc = g;
  this.Mb = new Ba;
  this.Gc = new Ba;
  this.ub = [0, 0, 0];
  this.Eb = 1E-5;
  this.Ta = Da.Eb;
  this.wa = 6;
  this.M = 0;
  this.wb = u;
  window.requestAnimationFrame || (window.requestAnimationFrame = window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(a) {
    window.setTimeout(a, 1E3 / 60)
  })
}
function M(a) {
  a.wb || (window.requestAnimationFrame(a.frame), a.wb = o)
}
function Ea(a) {
  var b = a.canvas.width, c = a.canvas.height, d = a.fa, a = a.u, e = 0.5 * d[0] * b, b = 0.5 * d[8] * b + 0.5 * d[11] * b, b = [a[0] * e + a[2] * b, a[4] * e + a[6] * b, a[8] * e + a[10] * b], e = 0.5 * d[5] * c, c = 0.5 * d[9] * c + 0.5 * d[11] * c, c = [a[1] * e + a[2] * c, a[5] * e + a[6] * c, a[9] * e + a[10] * c], e = d[11], d = [a[2] * e, a[6] * e, a[10] * e, a[14] * e + a[15] * d[15]], a = 0.7071067811 / Math.sqrt(ga(b, b) + ga(c, c));
  d[0] *= a;
  d[1] *= a;
  d[2] *= a;
  d[3] *= a;
  return d
}
function Fa(a, b, c) {
  var b = 2 * (b / a.canvas.width) - 1, d = -(2 * (c / a.canvas.height) - 1), e = G();
  I(a.fa, a.u, e);
  H(e);
  c = [];
  ia(e, [b, d, 0, 1], c);
  c[0] /= c[3];
  c[1] /= c[3];
  c[2] /= c[3];
  H(a.u, e);
  a = [e[12], e[13], e[14]];
  b = x();
  y(c, a, b);
  F(b);
  c = ua(a, b, [0, 0, 0]);
  return 0 <= c ? sa(a, b, c) : q
}
function Ga(a, b) {
  var c = a.f, d = c.createTexture();
  c.bindTexture(c.TEXTURE_2D, d);
  c.texImage2D(c.TEXTURE_2D, 0, c.RGBA, c.RGBA, c.UNSIGNED_BYTE, b);
  c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MAG_FILTER, c.LINEAR);
  c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MIN_FILTER, c.LINEAR);
  c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_S, c.CLAMP_TO_EDGE);
  c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_T, c.CLAMP_TO_EDGE);
  return d
}
;function Ha(a) {
  this.a = a;
  this.eb = this.s = this.Q = this.i = q;
  this.ec = 0;
  this.mode = a.f.TRIANGLES
}
function Ia(a, b) {
  var c = a.a.f;
  a.i == q && (a.i = c.createBuffer());
  c.bindBuffer(c.ARRAY_BUFFER, a.i);
  c.bufferData(c.ARRAY_BUFFER, new Float32Array(b), c.STATIC_DRAW);
  a.ec = b.length
}
function Ja(a, b) {
  var c = a.a.f;
  a.s == q && (a.s = c.createBuffer());
  c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, a.s);
  c.bufferData(c.ELEMENT_ARRAY_BUFFER, new Uint16Array(b), c.STATIC_DRAW);
  a.V = b.length
}
Ha.prototype.A = function(a) {
  var b = this.a.f;
  b.bindBuffer(b.ARRAY_BUFFER, this.i);
  b.vertexAttribPointer(a.vertex, 3, b.FLOAT, u, 0, 0);
  a.hasOwnProperty("tcoord") && (b.bindBuffer(b.ARRAY_BUFFER, this.Q), b.vertexAttribPointer(a.tcoord, 2, b.FLOAT, u, 0, 0));
  a.hasOwnProperty("color") && (b.bindBuffer(b.ARRAY_BUFFER, this.eb), b.vertexAttribPointer(a.color, 4, b.FLOAT, u, 0, 0));
  this.s ? (b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, this.s), b.drawElements(this.mode, this.V, b.UNSIGNED_SHORT, 0)) : b.drawArrays(this.mode, 0, this.ec / 3)
};
Ha.prototype.J = function() {
  var a = this.a.f;
  this.s && a.deleteBuffer(this.s);
  this.i && a.deleteBuffer(this.i);
  this.Q && a.deleteBuffer(this.Q);
  this.eb && a.deleteBuffer(this.eb);
  this.eb = this.Q = this.i = this.s = q
};
function Ka(a) {
  this.a = a;
  this.r = q;
  this.attributes = {};
  this.k = {};
  this.M = 0
}
Ka.prototype.createShader = function(a, b) {
  var c = this.a.f, d = c.createShader(a);
  c.shaderSource(d, b);
  c.compileShader(d);
  return!c.getShaderParameter(d, c.COMPILE_STATUS) ? (console.log("Shader compilation error: " + c.getShaderInfoLog(d)), c.deleteShader(d), q) : d
};
function La(a, b, c) {
  var d = a.a.f, b = a.createShader(d.VERTEX_SHADER, b), c = a.createShader(d.FRAGMENT_SHADER, c);
  if(!(b == q || c == q)) {
    if(a.r = d.createProgram(), d.attachShader(a.r, b), d.attachShader(a.r, c), d.linkProgram(a.r), d.getProgramParameter(a.r, d.LINK_STATUS)) {
      b = d.getProgramParameter(a.r, d.ACTIVE_ATTRIBUTES);
      for(c = a.M = 0;c < b;++c) {
        var e = d.getActiveAttrib(a.r, c), f = d.getAttribLocation(a.r, e.name);
        a.attributes[e.name] = f;
        f + 1 > a.M && (a.M = f + 1)
      }
      b = d.getProgramParameter(a.r, d.ACTIVE_UNIFORMS);
      for(c = 0;c < b;++c) {
        e = d.getActiveUniform(a.r, c), a.k[e.name] = d.getUniformLocation(a.r, e.name)
      }
    }else {
      console.log("Program link error: " + d.getProgramInfoLog(a.r)), d.deleteShader(b), d.deleteShader(c), d.deleteProgram(a.r), a.r = q
    }
  }
}
Ka.prototype.apply = function() {
  var a = this.a, b = a.f;
  b.useProgram(this.r);
  for(var c = a.M;c < this.M;c++) {
    b.enableVertexAttribArray(c)
  }
  for(c = this.M;c < a.M;c++) {
    b.disableVertexAttribArray(c)
  }
  a.M = this.M
};
function Ma(a, b) {
  this.a = a;
  this.g = b;
  this.qa = q;
  this.Ea = [q, q, q, q];
  this.Ka = q;
  this.Fa = [q, q, q, q];
  this.cd = [q, q, q, q]
}
Ma.prototype.reset = function() {
  for(var a = this.a.f, b = 0;4 > b;b++) {
    this.Ea[b] && (a.deleteBuffer(this.Ea[b]), this.Ea[b] = q)
  }
  this.qa && (a.deleteBuffer(this.qa), this.qa = q);
  for(b = 0;4 > b;b++) {
    this.Fa[b] && (a.deleteBuffer(this.Fa[b]), this.Fa[b] = q)
  }
  this.Ka && (a.deleteBuffer(this.Ka), this.Ka = q)
};
function Na() {
  this.parent = q;
  this.Ua = -1;
  this.i = this.F = this.b = this.children = q;
  this.jc = [1, 1, 0, 0];
  this.Sa = this.T = q;
  this.G = new na;
  this.h = this.n = 0;
  this.Tb = [0, 0, 0];
  this.q = {};
  this.state = N;
  this.g = q
}
var N = 0;
function Oa(a, b, c) {
  for(var d = Math.floor(c), c = c - d, e = Math.floor(b), b = b - e, f = a.g.B, g = a.g.R, d = g * (d * f + e), e = [0, 0, 0], j = 0;3 > j;j++) {
    e[j] = (1 - c) * (1 - b) * a.b[d + j] + c * (1 - b) * a.b[d + g * f + j] + c * b * a.b[d + g * f + g + j] + (1 - c) * b * a.b[d + g + j]
  }
  return e
}
function Pa(a, b, c, d) {
  a.parent = b;
  a.Ua = 2 * d + c;
  a.T = b.T;
  a.Sa = b.Sa;
  a.F = b.F;
  a.g = b.g;
  a.i = b.i;
  for(var e = a.g.B, f = (e - 1) / 2, g = 0;g <= f;g++) {
    for(var j = a.g.R * ((g + d * f) * e + c * f), i = 0;i <= f;i++) {
      a.G.extend(b.b[j], b.b[j + 1], b.b[j + 2]), j += a.g.R
    }
  }
  a.n = oa(a.G)
}
function Qa(a, b) {
  var c = a.Sa, d = b.ub, e = c[0] * d[0] + c[4] * d[1] + c[8] * d[2] + c[12], f = c[1] * d[0] + c[5] * d[1] + c[9] * d[2] + c[13], g = c[2] * d[0] + c[6] * d[1] + c[10] * d[2] + c[14], c = Math.sqrt(e * e + f * f + g * g);
  if(c < a.n) {
    return a.h = 0, b.Ta = b.Eb, b.wa = Math.max(b.wa, 2 * a.n), u
  }
  d = a.Tb;
  d[0] = Math.min(Math.max(e, a.G.min[0]), a.G.max[0]);
  d[1] = Math.min(Math.max(f, a.G.min[1]), a.G.max[1]);
  d[2] = Math.min(Math.max(g, a.G.min[2]), a.G.max[2]);
  var e = e - d[0], f = f - d[1], g = g - d[2], j = d[0], i = d[1], h = d[2] + K.n, d = Math.sqrt(e * e + f * f + g * g), e = (e * j + f * i + g * h) / (Math.sqrt(j * j + i * i + h * h) * d);
  a.h = d;
  e *= a.g.fb;
  if(-0.05 > e) {
    return o
  }
  e = b.Gc;
  Ca(e, b.Mb, a.T);
  a: {
    d = a.G;
    for(f = 0;4 > f;f++) {
      if(g = e.W[f], 0 > (0 <= g.m[0] ? d.max[0] : d.min[0]) * g.m[0] + (0 <= g.m[1] ? d.max[1] : d.min[1]) * g.m[1] + (0 <= g.m[2] ? d.max[2] : d.min[2]) * g.m[2] + g.ua) {
        e = u;
        break a
      }
    }
    e = o
  }
  return e ? (b.Ta = Math.max(b.Eb, Math.min(b.Ta, c - 2 * a.n)), b.wa = Math.max(b.wa, c + 2 * a.n), u) : o
}
Na.prototype.J = function(a) {
  if(3 == this.state) {
    a.Wb(this.i);
    a.Xb(this.F);
    for(var b in this.q) {
      this.q[b].J && this.q[b].J()
    }
  }
  this.parent = this.F = this.i = q
};
function Ra(a, b) {
  if(a.children) {
    for(var c = 0;4 > c;c++) {
      a.children[c].J(b), Ra(a.children[c], b)
    }
    a.children = q
  }
}
function Sa(a, b, c, d, e) {
  for(var f = a.b, g = 0.05 * a.n, j = a.g.B, i = 0;i < j;i++) {
    var h = f[c] - b[0], l = f[c + 1] - b[1], m = f[c + 2] - b[2], k = g / Math.sqrt(h * h + l * l + m * m), h = h * k, l = l * k, m = m * k;
    f[e] = f[c] - h;
    f[e + 1] = f[c + 1] - l;
    f[e + 2] = f[c + 2] - m;
    for(h = 3;h < a.g.R;h++) {
      f[e + h] = f[c + h]
    }
    e += a.g.R;
    c += d
  }
}
Na.prototype.ya = function(a, b) {
  for(var c = this.g.B, d = [], e = 1 / (c - 1), f = this.O & this.Ca * this.Ca - 1, g = Ta.Ub(f), f = Ta.Ub(f >>> 1), j = this.O >>> 2 * this.N, i = 0;i < c;i++) {
    for(var h = 0;h < c;h++) {
      d[i * c + h] = Ta.wc((g + i * e) / this.Ca, (f + h * e) / this.Ca, j)
    }
  }
  for(var e = G(), g = x(), f = x(), j = x(), l = h = i = 0, m = 0;m < d.length;m++) {
    i += d[m][0], h += d[m][1], l += d[m][2]
  }
  i = x([i / d.length, h / d.length, l / d.length]);
  j[0] = i[0];
  j[1] = i[1];
  j[2] = i[2];
  F(j);
  y(d[0], d[3], f);
  ea(j, f, g);
  F(g);
  ea(j, g, f);
  F(f);
  e[0] = g[0];
  e[1] = g[1];
  e[2] = g[2];
  e[3] = 0;
  e[4] = f[0];
  e[5] = f[1];
  e[6] = f[2];
  e[7] = 0;
  e[8] = j[0];
  e[9] = j[1];
  e[10] = j[2];
  e[11] = 0;
  e[12] = i[0];
  e[13] = i[1];
  e[14] = i[2];
  e[15] = 1;
  this.T = e;
  e = G();
  H(this.T, e);
  this.Sa = e;
  c = new Float32Array(3 * c * c);
  for(f = g = 0;f < d.length;f++) {
    c[g] = e[0] * d[f][0] + e[4] * d[f][1] + e[8] * d[f][2] + e[12], c[g + 1] = e[1] * d[f][0] + e[5] * d[f][1] + e[9] * d[f][2] + e[13], c[g + 2] = e[2] * d[f][0] + e[6] * d[f][1] + e[10] * d[f][2] + e[14], g += 3
  }
  this.b = c;
  d = this.g.B;
  c = this.g.R;
  this.G.rb(this.b, c * d * d, c);
  this.n = oa(this.G);
  if(this.g.dc) {
    e = this.g.B;
    g = this.g.R;
    f = g * e;
    for(i = j = 0;i < e;i++) {
      h = i == e - 1 ? 0 : f;
      l = 0 == i ? 0 : -f;
      for(m = 0;m < e;m++) {
        var k = m == e - 1 ? 0 : g, n = 0 == m ? 0 : -g, k = ea([this.b[j + k] - this.b[j + n], this.b[j + k + 1] - this.b[j + n + 1], this.b[j + k + 2] - this.b[j + n + 2]], [this.b[j + h] - this.b[j + l], this.b[j + h + 1] - this.b[j + l + 1], this.b[j + h + 2] - this.b[j + l + 2]], []);
        F(k);
        this.b[j + 3] = k[0];
        this.b[j + 4] = k[1];
        this.b[j + 5] = k[2];
        j += g
      }
    }
  }
  this.g.Xa && (e = [0, 0, 0], ha(this.Sa, e), g = c * d * d, Sa(this, e, 0, c, g), g += c * d, Sa(this, e, c * d * (d - 1), c, g), g += c * d, Sa(this, e, 0, c * d, g), g += c * d, Sa(this, e, c * (d - 1), c * d, g), g += c * d, Sa(this, e, c * (d * (d - 1) / 2), c, g), Sa(this, e, c * ((d - 1) / 2), c * d, g + c * d));
  this.i != q && this.parent == q && a.Wb(this.i);
  this.i = a.rc(this.b);
  b && (this.F = a.sc(b));
  this.state = 3
};
function Ua(a) {
  var b = a.f, c = [], d = [], e = this;
  this.Kc = this.Jc = 0;
  this.sc = function(a) {
    if(0 < c.length) {
      var d = c.pop();
      b.bindTexture(b.TEXTURE_2D, d);
      b.texImage2D(b.TEXTURE_2D, 0, b.RGB, b.RGB, b.UNSIGNED_BYTE, a);
      b.generateMipmap(b.TEXTURE_2D);
      e.Kc++
    }else {
      d = b.createTexture(), b.bindTexture(b.TEXTURE_2D, d), b.texImage2D(b.TEXTURE_2D, 0, b.RGB, b.RGB, b.UNSIGNED_BYTE, a), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, b.LINEAR), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, b.LINEAR_MIPMAP_LINEAR), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_S, b.CLAMP_TO_EDGE), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_T, b.CLAMP_TO_EDGE), b.generateMipmap(b.TEXTURE_2D), e.Jc++
    }
    return a = d
  };
  this.rc = function(a) {
    var c;
    c = 0 < d.length ? d.pop() : b.createBuffer();
    b.bindBuffer(b.ARRAY_BUFFER, c);
    b.bufferData(b.ARRAY_BUFFER, a, b.STATIC_DRAW);
    return c
  };
  this.Xb = function(a) {
    c.push(a)
  };
  this.Wb = function(a) {
    d.push(a)
  };
  this.tc = function() {
    for(var a = 0;a < c.length;a++) {
      b.deleteTexture(c[a])
    }
    for(a = c.length = 0;a < d.length;a++) {
      b.deleteBuffer(d[a])
    }
    d.length = 0
  }
}
;function Va(a) {
  function b() {
    M(a)
  }
  this.a = a;
  this.ga = new Ua(a);
  this.Pa = this.la = q;
  this.ra = [];
  this.Ha = [];
  this.P = [];
  this.z = [];
  this.da = q;
  this.Ga = [];
  for(var c = 0;4 > c;c++) {
    this.Ga[c] = new Wa(b)
  }
  this.ma = u;
  this.C = {B:9, Xa:o, fb:1, ac:256, R:a.Aa ? 6 : 3, dc:a.Aa};
  this.Q = q;
  this.ab = new Ma(this.a, this.C);
  this.Dc = [1, 1, 0, 0];
  this.freeze = this.Ib = u;
  this.S = this.Lc = 0;
  c = "\tattribute vec3 vertex;\n\tattribute vec2 tcoord;\n\tuniform mat4 modelViewMatrix;\n\tuniform mat4 projectionMatrix;\n\tuniform vec4 texTransform;\n\tvarying vec2 texCoord;\n";
  a.Aa && (c += "attribute vec3 normal;\nvarying vec3 color;\n");
  c += "\tvoid main(void) \n\t{\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(vertex, 1.0);\n";
  a.Aa && (c += "vec4 vn = modelViewMatrix * vec4(normal,0);\ncolor = max( vec3(-vn[2],-vn[2],-vn[2]), 0.0 );\n");
  var d = "\t#ifdef GL_ES\n\tprecision highp float;\n\t#endif\n\t\n\tvarying vec2 texCoord;\n";
  a.Aa && (d += "varying vec3 color;\n");
  d += "\tuniform sampler2D colorTexture;\n\tuniform int wireframe;\n\t\n\tvoid main(void)\n\t{\n\t\tif(wireframe == 1)\n\t\t\tgl_FragColor.rgb = vec3(1.0,1.0,1.0);\n\t\telse {\n\t\t\tgl_FragColor.rgb = texture2D(colorTexture, texCoord).rgb;\n";
  a.Aa && (d += "gl_FragColor.rgb *= color;\n");
  this.e = new Ka(this.a);
  La(this.e, c + "\t\ttexCoord = vec2(tcoord.s * texTransform.x + texTransform.z, tcoord.t * texTransform.y + texTransform.w);\n\t}\n\t", d + "\t\t}\n\t\tgl_FragColor.a = 1.0;\n\t}\n\t")
}
Va.prototype.reset = function() {
  for(var a = 0;a < this.z.length;a++) {
    Ra(this.z[a], this.ga), this.z[a].state = N, this.z[a].J()
  }
  a = this.a.f;
  this.ab.reset();
  a.deleteBuffer(this.Q);
  this.da = this.Q = q
};
function Xa(a, b, c) {
  a.Mc++;
  b.S = a.S;
  b.state == N && (b.state = 1, a.Ha.push(b));
  var d;
  if(d = 3 == b.state) {
    if(d = c + 1 < a.la.Fb) {
      if(d = a.a, b.h < b.n) {
        d = o
      }else {
        var e = b.T, f = b.Tb, g = d.Nc;
        d = b.n / b.g.ac / ((e[0] * f[0] + e[4] * f[1] + e[8] * f[2] + e[12]) * g[0] + (e[1] * f[0] + e[5] * f[1] + e[9] * f[2] + e[13]) * g[1] + (e[2] * f[0] + e[6] * f[1] + e[10] * f[2] + e[14]) * g[2] + g[3]) > d.ed
      }
    }
  }
  if(d) {
    b.children == q && (d = new Ya(b.N + 1, 4 * b.O, b.face), e = new Ya(b.N + 1, 4 * b.O + 2, b.face), f = new Ya(b.N + 1, 4 * b.O + 1, b.face), g = new Ya(b.N + 1, 4 * b.O + 3, b.face), Pa(d, b, 0, 0), Pa(e, b, 1, 0), Pa(f, b, 0, 1), Pa(g, b, 1, 1), b.children = [d, e, f, g]);
    for(d = 0;4 > d;d++) {
      Qa(b.children[d], a.a) ? Ra(b.children[d], a.ga) : Xa(a, b.children[d], c + 1)
    }
  }else {
    a.ra.push(b)
  }
}
Va.prototype.A = function() {
  if(this.la != q && this.la.Gb) {
    this.da == q && this.la.na && (this.da = Ga(this.a, this.la.na));
    var a = this.a.Kb;
    if(!this.freeze) {
      a && a.start("traverseTime");
      this.ra.length = 0;
      this.Mc = this.Ha.length = 0;
      this.a.Ta = 1E10;
      this.a.wa = -1;
      if(!this.ma && !this.da) {
        this.ma = o;
        for(var b = 0;b < this.z.length;b++) {
          var c = this.z[b], d = 3 == c.state;
          c.S = this.S;
          this.ma = this.ma && d;
          !d && c.state == N && (c.state = 1, this.Ha.push(c))
        }
      }
      if(this.ma || this.da) {
        for(b = 0;b < this.z.length;b++) {
          c = this.z[b], Qa(c, this.a) ? (d = 3 == c.state, this.da && d && (this.ga.Xb(c.F), c.F = q, c.state = N), Ra(c, this.ga)) : Xa(this, c, 0)
        }
      }
      a && a.end("traverseTime")
    }
    if(this.ma || this.da) {
      a && a.start("renderTime");
      b = this.a;
      c = this.a.f;
      c.enable(c.POLYGON_OFFSET_FILL);
      c.polygonOffset(0, 4);
      c.disable(c.CULL_FACE);
      this.e.apply();
      d = this.e.attributes;
      ja(45, b.canvas.width / b.canvas.height, b.Ta, b.wa, b.fa);
      c.activeTexture(c.TEXTURE0);
      c.uniformMatrix4fv(this.e.k.projectionMatrix, u, b.fa);
      c.uniform1i(this.e.k.colorTexture, 0);
      if(!this.Q) {
        var e = this.C.B, f = this.C.Xa, g = 2 * e * e;
        f && (g += 12 * e);
        for(var g = new Float32Array(g), j = 1 / (e - 1), i = 0, h = 0, l = 0;l < e;l++) {
          for(var m = 0, k = 0;k < e;k++) {
            g[i] = m, g[i + 1] = h, i += 2, m += j
          }
          h += j
        }
        if(f) {
          for(k = h = m = 0;k < e;k++) {
            g[i] = m, g[i + 1] = h, m += j, i += 2
          }
          m = 0;
          h = 1;
          for(k = 0;k < e;k++) {
            g[i] = m, g[i + 1] = h, m += j, i += 2
          }
          for(k = h = m = 0;k < e;k++) {
            g[i] = m, g[i + 1] = h, h += j, i += 2
          }
          m = 1;
          for(k = h = 0;k < e;k++) {
            g[i] = m, g[i + 1] = h, h += j, i += 2
          }
          m = 0;
          h = 0.5;
          for(k = 0;k < e;k++) {
            g[i] = m, g[i + 1] = h, m += j, i += 2
          }
          m = 0.5;
          for(k = h = 0;k < e;k++) {
            g[i] = m, g[i + 1] = h, h += j, i += 2
          }
        }
        e = this.a.f;
        f = e.createBuffer();
        e.bindBuffer(e.ARRAY_BUFFER, f);
        e.bufferData(e.ARRAY_BUFFER, g, e.STATIC_DRAW);
        this.Q = f
      }
      c.bindBuffer(c.ARRAY_BUFFER, this.Q);
      c.vertexAttribPointer(d.tcoord, 2, c.FLOAT, u, 0, 0);
      e = g = q;
      for(f = 0;f < this.ra.length;f++) {
        j = this.ra[f];
        i = 3 == j.state;
        h = -1 == j.Ua;
        !i && h ? (c.bindTexture(c.TEXTURE_2D, this.da), l = j.jc) : (c.bindTexture(c.TEXTURE_2D, j.F), l = this.Dc);
        e != l && (c.uniform4f(this.e.k.texTransform, l[0], l[1], l[2], l[3]), e = l);
        I(b.u, j.T, b.L);
        c.uniformMatrix4fv(this.e.k.modelViewMatrix, u, b.L);
        c.bindBuffer(c.ARRAY_BUFFER, j.i);
        c.vertexAttribPointer(d.vertex, 3, c.FLOAT, u, 4 * this.C.R, 0);
        this.C.dc && c.vertexAttribPointer(d.normal, 3, c.FLOAT, u, 4 * this.C.R, 12);
        if(this.Ib) {
          if(i || h) {
            l = this.ab;
            if(l.Ka == q) {
              for(var k = l.g.B, m = [], n = 0;n < k;n++) {
                for(var p = 0;p < k - 1;p++) {
                  m.push(n * k + p), m.push(n * k + p + 1)
                }
              }
              for(n = 0;n < k;n++) {
                for(p = 0;p < k - 1;p++) {
                  m.push(p * k + n), m.push((p + 1) * k + n)
                }
              }
              k = l.a.f;
              n = k.createBuffer();
              k.bindBuffer(k.ELEMENT_ARRAY_BUFFER, n);
              k.bufferData(k.ELEMENT_ARRAY_BUFFER, new Uint16Array(m), k.STATIC_DRAW);
              l.V = m.length;
              n.V = m.length;
              l.Ka = n
            }
            l = l.Ka
          }else {
            l = this.ab;
            m = j.Ua;
            if(l.Fa[m] == q) {
              for(var n = m % 2, p = Math.floor(m / 2), r = l.g.B, t = (r - 1) / 2, k = [], s = t * p;s < t * (p + 1) + 1;s++) {
                for(var w = t * n;w < t * (n + 1);w++) {
                  k.push(s * r + w), k.push(s * r + w + 1)
                }
              }
              for(s = t * n;s < t * (n + 1) + 1;s++) {
                for(w = t * p;w < t * (p + 1);w++) {
                  k.push(w * r + s), k.push((w + 1) * r + s)
                }
              }
              n = l.a.f;
              p = n.createBuffer();
              n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, p);
              n.bufferData(n.ELEMENT_ARRAY_BUFFER, new Uint16Array(k), n.STATIC_DRAW);
              p.V = k.length;
              l.Fa[m] = p
            }
            l = l.Fa[m]
          }
          g != l && (c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, l), g = l);
          c.uniform1i(this.e.k.wireframe, 1);
          c.drawElements(c.LINES, g.V, c.UNSIGNED_SHORT, 0);
          c.uniform1i(this.e.k.wireframe, 0)
        }
        if(i || h) {
          j = this.ab;
          if(j.qa == q) {
            h = j.g.B;
            i = [];
            for(l = 0;l < h - 1;l++) {
              for(m = 0;m < h - 1;m++) {
                i.push(l * h + m), i.push((l + 1) * h + m), i.push(l * h + m + 1), i.push(l * h + m + 1), i.push((l + 1) * h + m), i.push((l + 1) * h + m + 1)
              }
            }
            if(j.g.Xa) {
              k = h * h;
              for(m = 0;m < h - 1;m++) {
                i.push(k + m), i.push(m), i.push(k + m + 1), i.push(k + m + 1), i.push(m), i.push(m + 1)
              }
              k += h;
              for(m = 0;m < h - 1;m++) {
                i.push((h - 1) * h + m), i.push(k + m), i.push((h - 1) * h + m + 1), i.push((h - 1) * h + m + 1), i.push(k + m), i.push(k + m + 1)
              }
              k += h;
              for(l = 0;l < h - 1;l++) {
                i.push(k + l), i.push(k + l + 1), i.push(l * h), i.push(l * h), i.push(k + l + 1), i.push((l + 1) * h)
              }
              k += h;
              for(l = 0;l < h - 1;l++) {
                i.push(l * h + h - 1), i.push((l + 1) * h + h - 1), i.push(k + l), i.push(k + l), i.push((l + 1) * h + h - 1), i.push(k + l + 1)
              }
            }
            h = j.a.f;
            l = h.createBuffer();
            h.bindBuffer(h.ELEMENT_ARRAY_BUFFER, l);
            h.bufferData(h.ELEMENT_ARRAY_BUFFER, new Uint16Array(i), h.STATIC_DRAW);
            j.V = i.length;
            j.qa = l;
            j.qa.V = i.length
          }
          j = j.qa
        }else {
          i = this.ab;
          j = j.Ua;
          if(i.Ea[j] == q) {
            l = j % 2;
            m = Math.floor(j / 2);
            k = i.g.B;
            n = (k - 1) / 2;
            h = [];
            for(p = n * m;p < n * (m + 1);p++) {
              for(r = n * l;r < n * (l + 1);r++) {
                h.push(p * k + r), h.push((p + 1) * k + r), h.push(p * k + r + 1), h.push(p * k + r + 1), h.push((p + 1) * k + r), h.push((p + 1) * k + r + 1)
              }
            }
            i.cd[j] = h;
            if(i.g.Xa) {
              t = 0 == m ? k * k : k * k + 4 * k;
              s = 0 == m ? 0 : n * k;
              for(p = n * l;p < n * (l + 1);p++) {
                h.push(t + p), h.push(s + p), h.push(t + p + 1), h.push(t + p + 1), h.push(s + p), h.push(s + p + 1)
              }
              t = 0 == m ? k * k + 4 * k : k * k + k;
              s = 0 == m ? n * k : (k - 1) * k;
              for(p = n * l;p < n * (l + 1);p++) {
                h.push(s + p), h.push(t + p), h.push(s + p + 1), h.push(s + p + 1), h.push(t + p), h.push(t + p + 1)
              }
              t = 0 == l ? k * k + 2 * k : k * k + 5 * k;
              s = 0 == l ? 0 : n;
              for(r = n * m;r < n * (m + 1);r++) {
                h.push(t + r), h.push(t + r + 1), h.push(s + r * k), h.push(s + r * k), h.push(t + r + 1), h.push(s + (r + 1) * k)
              }
              t = 0 == l ? k * k + 5 * k : k * k + 3 * k;
              s = 0 == l ? n : k - 1;
              for(r = n * m;r < n * (m + 1);r++) {
                h.push(r * k + s), h.push((r + 1) * k + s), h.push(t + r), h.push(t + r), h.push((r + 1) * k + s), h.push(t + r + 1)
              }
            }
            l = i.a.f;
            m = l.createBuffer();
            l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, m);
            l.bufferData(l.ELEMENT_ARRAY_BUFFER, new Uint16Array(h), l.STATIC_DRAW);
            m.V = h.length;
            i.Ea[j] = m
          }
          j = i.Ea[j]
        }
        l = j;
        g != l && (c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, l), g = l);
        c.drawElements(c.TRIANGLES, g.V, c.UNSIGNED_SHORT, 0)
      }
      for(f = 0;f < this.P.length;f++) {
        this.P[f].Ic && this.P[f].A(this.ra)
      }
      c.disable(c.POLYGON_OFFSET_FILL);
      for(f = 0;f < this.P.length;f++) {
        this.P[f].Ic || this.P[f].A(this.ra)
      }
      a && a.end("renderTime")
    }
    a && a.start("generateTime");
    for(b = 0;b < this.Ga.length;b++) {
      if(c = this.Ga[b], (d = c.$a) && c.pb) {
        if(d.S == this.S) {
          this.Pa ? d.ya(this.ga, c.ka, this.Pa.zd(c.uc)) : d.ya(this.ga, c.ka);
          for(b = 0;b < this.P.length;b++) {
            this.P[b].ya && this.P[b].ya(d)
          }
          this.Lc++;
          M(this.a)
        }else {
          d.state = N
        }
        c.$a = q
      }else {
        d && c.vb && (d.state = -10, c.$a = q)
      }
    }
    a && a.end("generateTime");
    a && a.start("requestTime");
    this.Ha.sort(function(a, b) {
      return a.h - b.h
    });
    b = this.Ha.length;
    for(c = 0;c < b;c++) {
      if(d = this.Ha[c], d.S == this.S) {
        e = q;
        for(g = 0;g < this.Ga.length;g++) {
          if(!this.Ga[g].$a) {
            e = this.Ga[g];
            break
          }
        }
        e ? (e.$a = d, g = q, this.Pa && (g = Za(this.Pa, d)), f = Za(this.la, d), e.pb = u, e.vb = u, e.Bb = u, e.ka.src = f, g && (e.sb = u, e.La.open("GET", g), e.La.send()), d.state = 2) : d.state = N
      }else {
        d.state = N
      }
    }
    a && a.end("requestTime");
    this.S++
  }
};
function $a(a) {
  this.qb = -1;
  this.lc = q;
  this.Fb = -1;
  this.name = a && a.hasOwnProperty("name") ? a.name : "";
  this.yd = a && a.hasOwnProperty("overlay") ? a.overlay : u;
  this.Gb = o;
  this.c = q
}
$a.prototype.sa = function(a) {
  this.c = a
};
$a.prototype.Nb = function() {
  this.c = q
};
function Wa(a) {
  this.vb = this.pb = u;
  this.$a = q;
  this.Bb = u;
  this.sb = o;
  this.Rb = a;
  var b = this;
  this.ka = new Image;
  this.ka.crossOrigin = "";
  this.ka.onload = function() {
    b.Bb = o;
    b.sb && (b.pb = o, b.Rb())
  };
  this.ka.onerror = function() {
    console.log("Error while loading " + b.ka.src);
    b.vb = o
  };
  this.La = new XMLHttpRequest;
  this.La.onreadystatechange = function() {
    4 == b.La.readyState && 200 == b.La.status && (b.uc = b.La.responseText, b.sb = o, b.Bb && (b.pb = o, b.Rb()))
  }
}
;function O(a) {
  this.a = new Da(a);
  this.j = new Va(this.a);
  this.j.Ib = a.showWireframe;
  this.Ja = new ab(this);
  this.Db = [];
  this.ia = [];
  var b = this;
  this.a.frame = function() {
    b.a.wb = u;
    b.A();
    b.a.Vb ? M(b.a) : 0 < b.ia.length && M(b.a)
  };
  M(this.a);
  a.atmosphere && (this.Z = new ba.oc(this.a))
}
v = O.prototype;
v.J = function() {
  this.j.ga.tc();
  this.j.Bd()
};
v.Zc = function(a, b) {
  switch(a) {
    case "atmosphere":
      b ? this.Z || (this.Z = new ba.oc(this.a)) : this.Z && (this.Z = q);
      break;
    case "showWireframe":
      this.j.Ib = b
  }
};
v.Xc = function(a) {
  var b = this.j;
  b.la = a;
  b.reset();
  if(a) {
    b.C.ac = a.qb;
    var c = a.lc, d = b.C, e = b.ga;
    d.Xa = u;
    d.fb = -1;
    d.B = 5;
    for(var f = [], g = Math.pow(c.Ca, 2), j = 12 * g, i = 0;i < j;i++) {
      var h = new Ya(c.N, i, Math.floor(i / g));
      h.g = d;
      f.push(h);
      h.ya(e);
      h.state = N
    }
    b.z = f;
    b.ma = u
  }
  a.sa(this);
  M(this.a)
};
v.Wc = function(a) {
  var b = this.j;
  b.reset();
  b.Pa = a;
  b.C.B = a ? a.qb : 9;
  a.sa(this);
  M(this.a)
};
v.qc = function(a) {
  this.Db.push(a);
  a.sa(this);
  M(this.a)
};
v.Uc = function(a) {
  var b = this.Db.indexOf(a);
  -1 != b && (this.Db.splice(b, 1), a.Nb())
};
function bb(a, b, c) {
  a = a.j.z[0];
  return 3 == a.state ? bb(a, b, c) : 0
}
v.Bc = function() {
  var a = this.a, b = G();
  H(a.u, b);
  var c = [b[12], b[13], b[14]];
  I(a.fa, a.u, b);
  H(b);
  for(var a = [[-1, -1, 1, 1], [1, -1, 1, 1], [-1, 1, 1, 1], [1, 1, 1, 1]], d = x(), e = [0, 0, 0], f = 0;4 > f;f++) {
    ia(b, a[f]);
    E(a[f], 1 / a[f][3]);
    y(a[f], c, a[f]);
    F(a[f]);
    var g = ua(c, a[f], e);
    if(0 > g) {
      return q
    }
    a[f] = K.xa(sa(c, a[f], g, d))
  }
  b = new J;
  b.ha = a[0][0];
  b.Oa = a[0][0];
  b.Ya = a[0][1];
  b.pa = a[0][1];
  for(c = 1;c < a.length;c++) {
    b.ha = Math.min(b.ha, a[c][0]), b.Oa = Math.max(b.Oa, a[c][0]), b.Ya = Math.min(b.Ya, a[c][1]), b.pa = Math.max(b.pa, a[c][1])
  }
  return b
};
v.$b = function(a, b) {
  var c = Fa(this.a, a, b);
  if(c == q) {
    return q
  }
  var d = [];
  K.xa(c, d);
  return d
};
v.A = function() {
  var a = this.a, b = a.Kb, c = a.f;
  b && b.start("globalRenderTime");
  if(0 < this.ia.length) {
    for(var d = Date.now(), e = 0;e < this.ia.length;e++) {
      this.ia[e].update(d)
    }
  }
  c.clear(c.COLOR_BUFFER_BIT | c.DEPTH_BUFFER_BIT);
  c.viewport(0, 0, a.canvas.width, a.canvas.height);
  c = G();
  H(a.u, c);
  a.ub = [0, 0, 0];
  ha(c, a.ub);
  a.Nc = Ea(a);
  Ca(a.Mb, a.vc, a.u);
  this.Z && this.Z.Ad(this.j);
  this.j.A();
  0 != this.j.ra.length && (this.Z && this.Z.A(), b && b.end("globalRenderTime"))
};
function W(a, b, c, d) {
  L.prototype.constructor.call(this);
  this.speed = b * K.ib / 1E3;
  this.d = [];
  for(b = 0;b < a.length;b++) {
    var e = {position:K.ba(a[b]), H:q, h:0};
    this.d.push(e);
    if(0 < b) {
      var e = this.d[b].position[0] - this.d[b - 1].position[0], f = this.d[b].position[1] - this.d[b - 1].position[1], g = this.d[b].position[2] - this.d[b - 1].position[2];
      this.d[b - 1].h = Math.sqrt(e * e + f * f + g * g)
    }
  }
  for(b = 1;b < a.length - 1;b++) {
    e = y(this.d[b + 1].position, this.d[b].position, x()), f = y(this.d[b - 1].position, this.d[b].position, x()), F(e), F(f), this.d[b].H = y(e, f, x()), F(this.d[b].H)
  }
  e = y(this.d[1].position, this.d[0].position, x());
  E(e, 3 / this.d[0].h);
  this.d[0].H = y(e, this.d[1].H, x());
  E(this.d[0].H, 0.5);
  b = a.length - 1;
  e = y(this.d[b].position, this.d[b - 1].position, x());
  E(e, 3 / this.d[b - 1].h);
  this.d[b].H = y(e, this.d[b - 1].H, x());
  E(this.d[b].H, 0.5);
  this.c = d;
  this.ja = this.index = 0;
  this.Wa = -1;
  this.md = [];
  this.Sb = -0.2;
  this.Ob = 1E3;
  var j = this;
  this.Ia = c ? c : function(a, b) {
    var c = F(a, x()), d = K.xa(a);
    d[2] = bb(j.c, d[0], d[1]) + j.Ob;
    var d = K.ba(d), e = F(b, x()), e = da(d, e, x());
    da(e, E(c, j.Sb, x()));
    ka(d, e, c, Da.u)
  }
}
ma(L, W);
v = W.prototype;
v.$c = function(a) {
  this.speed = parseFloat(a) * K.ib / 1E3
};
v.Vc = function(a) {
  this.Ob = parseFloat(a)
};
v.Yc = function(a) {
  this.Sb = Math.tan(parseFloat(a) * Math.PI / 180)
};
v.start = function() {
  var a = -1;
  this.state == L.kd.jd && (a = this.startTime);
  L.prototype.start.call(this);
  this.Wa = -1 != a ? this.Wa + (this.startTime - a) : -1
};
v.update = function(a) {
  -1 == this.Wa ? this.ja = this.index = 0 : this.ja += (a - this.Wa) * this.speed;
  for(this.Wa = a;this.ja >= this.d[this.index].h && this.index < this.d.length - 1;) {
    this.ja -= this.d[this.index].h, this.index += 1
  }
  if(this.index < this.d.length - 1) {
    var a = this.ja / this.d[this.index].h, b = this.d[this.index].position, c = this.d[this.index + 1].position, d = E(this.d[this.index].H, this.d[this.index].h, x()), e = E(this.d[this.index + 1].H, this.d[this.index].h, x()), f = a * a, g = f * a, j = 2 * b[0] - 2 * c[0] + d[0] + e[0], i = 2 * b[1] - 2 * c[1] + d[1] + e[1], h = 2 * b[2] - 2 * c[2] + d[2] + e[2], l = -3 * b[0] + 3 * c[0] - 2 * d[0] - e[0], m = -3 * b[1] + 3 * c[1] - 2 * d[1] - e[1], k = -3 * b[2] + 3 * c[2] - 2 * d[2] - e[2], 
    n = x();
    n[0] = j * g + l * f + d[0] * a + b[0];
    n[1] = i * g + m * f + d[1] * a + b[1];
    n[2] = h * g + k * f + d[2] * a + b[2];
    f = a * a;
    g = 6 * b[0] - 6 * c[0] + 3 * d[0] + 3 * e[0];
    j = 6 * b[1] - 6 * c[1] + 3 * d[1] + 3 * e[1];
    i = 6 * b[2] - 6 * c[2] + 3 * d[2] + 3 * e[2];
    h = -6 * b[0] + 6 * c[0] - 4 * d[0] - 2 * e[0];
    l = -6 * b[1] + 6 * c[1] - 4 * d[1] - 2 * e[1];
    b = -6 * b[2] + 6 * c[2] - 4 * d[2] - 2 * e[2];
    c = x();
    c[0] = g * f + h * a + d[0];
    c[1] = j * f + l * a + d[1];
    c[2] = i * f + b * a + d[2];
    this.Ia(n, c)
  }else {
    this.index == this.d.length - 1 ? this.Ia(this.d[this.index].position, this.d[this.index].H) : this.stop()
  }
};
function ab(a) {
  this.c = a;
  this.Qa = [];
  for(var a = cb, b = 0;b < a.length;b++) {
    this.Qa.push({Na:a[b].Na, Ma:a[b].Ma, za:q})
  }
}
var cb = [];
ab.prototype.p = function(a, b) {
  for(var c = a.geometry.type, d = 0;d < this.Qa.length;d++) {
    var e = this.Qa[d];
    e.Ma(c, b) && (e.za || (e.za = e.Na(this.c), this.c.j.P.push(e.za)), e.za.p(a, b))
  }
};
ab.prototype.D = function(a) {
  for(var b = 0;b < this.Qa.length;b++) {
    var c = this.Qa[b];
    c.za && c.za.D(a)
  }
};
var db, X = q;
db = {xc:function(a, b) {
  X || (X = document.createElement("canvas"), X.width = 512, X.height = 20);
  b || (b = "#fff");
  var c = X.getContext("2d");
  c.clearRect(0, 0, X.width, X.height);
  c.fillStyle = b;
  c.font = "18px sans-serif";
  c.textBaseline = "top";
  c.shadowColor = "#000";
  c.shadowOffsetX = 1;
  c.shadowOffsetY = 1;
  c.shadowBlur = 2;
  c.fillText(a, 1, 1);
  var d = c.measureText(a);
  return c.getImageData(0, 0, Math.floor(d.width) + 2, X.height)
}};
function eb(a) {
  this.a = a.a;
  this.C = a.C;
  this.l = [];
  this.fc = 0;
  this.e = new Ka(this.a);
  La(this.e, "\tattribute vec3 vertex; // vertex have z = 0, spans in x,y from -0.5 to 0.5 \n\tuniform mat4 viewProjectionMatrix; \n\tuniform vec3 poiPosition; // world position \n\tuniform vec2 poiScale; // x,y scale \n\tuniform vec2 tst; \n\t\n\tvarying vec2 texCoord; \n\t\n\tvoid main(void)  \n\t{ \n\t\t// Generate texture coordinates, input vertex goes from -0.5 to 0.5 (on x,y) \n\t\ttexCoord = vertex.xy + vec2(0.5) + tst; \n\t\t// Invert y \n\t\ttexCoord.y = 1.0 - texCoord.y; \n\t\t\n\t\t// Compute poi position in clip coordinate \n\t\tgl_Position = viewProjectionMatrix * vec4(poiPosition, 1.0); \n\t\tgl_Position.xy += vertex.xy * gl_Position.w * poiScale; \n\t} \n\t", 
  "\t#ifdef GL_ES \n\tprecision highp float; \n\t#endif \n\t\n\tvarying vec2 texCoord; \n\tuniform sampler2D texture; \n\t\n\tvoid main(void) \n\t{ \n\t\tgl_FragColor = texture2D(texture, texCoord); \n\t} \n\t");
  this.Ba = new Ha(this.a);
  Ia(this.Ba, [-0.5, -0.5, 0, -0.5, 0.5, 0, 0.5, 0.5, 0, 0.5, -0.5, 0]);
  Ja(this.Ba, [0, 3, 1, 1, 3, 2])
}
function fb(a, b, c) {
  b.F = Ga(a.a, c);
  b.kc = c.width;
  b.Lb = c.height
}
eb.prototype.p = function(a, b) {
  if(b) {
    var c = this.xb(b);
    if(b.label) {
      var d = db.xc(a.properties.name, a.properties.textColor);
      fb(this, c, d)
    }
    var d = K.ba(a.geometry.coordinates), e = x();
    F(d, e);
    c.ea.push({Pc:d, hd:e, hb:a})
  }
};
eb.prototype.D = function(a) {
  for(var b = 0;b < this.l.length;b++) {
    for(var c = this.l[b], d = 0;d < c.ea.length;d++) {
      if(c.ea[d].hb == a) {
        c.ea.splice(d, 1);
        return
      }
    }
  }
};
eb.prototype.xb = function(a) {
  if(!a.label) {
    for(var b = 0;b < this.l.length;b++) {
      var c = this.l[b];
      if(c.style.Ab == a.Ab && c.style.zb == a.zb && c.style.label == c.style.label) {
        return c
      }
    }
  }
  c = {F:q, ea:[], style:a};
  if(a.iconUrl) {
    var d = new Image, e = this;
    d.onload = function() {
      fb(e, c, d)
    };
    d.src = a.Ab
  }else {
    a.icon && fb(this, c, a.zb)
  }
  this.l.push(c);
  return c
};
eb.prototype.A = function() {
  if(0 != this.l.length) {
    this.fc = 0;
    var a = this.a, b = this.a.f;
    b.enable(b.BLEND);
    b.blendEquation(b.FUNC_ADD);
    b.blendFunc(b.SRC_ALPHA, b.ONE_MINUS_SRC_ALPHA);
    this.e.apply();
    I(a.fa, a.u, a.L);
    b.uniformMatrix4fv(this.e.k.viewProjectionMatrix, u, a.L);
    b.uniform1i(this.e.k.texture, 0);
    H(a.u, a.L);
    var c = [a.L[8], a.L[9], a.L[10]];
    F(c);
    E(c, this.C.fb, c);
    for(var d = Ea(a), e = 0;e < this.l.length;e++) {
      var f = this.l[e];
      if(!(f.F == q || 0 == f.ea.length)) {
        b.activeTexture(b.TEXTURE0);
        b.bindTexture(b.TEXTURE_2D, f.F);
        var g = [2 * f.kc / a.canvas.width, 2 * f.Lb / a.canvas.height];
        b.uniform2fv(this.e.k.poiScale, g);
        b.uniform2fv(this.e.k.tst, [0.5 / f.kc, 0.5 / f.Lb]);
        for(var j = 0;j < f.ea.length;++j) {
          var i = f.ea[j].Pc, h = f.ea[j].hd, g = f.Lb * (d[0] * i[0] + d[1] * i[1] + d[2] * i[2] + d[3]), g = g * this.C.fb, l;
          if(l = !(0.001 * (g / K.ib) > f.style.Oc)) {
            if(l = 0 < ga(h, c)) {
              a: {
                l = a.Mb;
                for(var m = 1, k = 0;4 > k;k++) {
                  var n = l.W[k].m, n = i[0] * n[0] + i[1] * n[1] + i[2] * n[2] + l.W[k].ua;
                  if(n <= g) {
                    if(n < -g) {
                      l = -1;
                      break a
                    }
                    m = 0
                  }
                }
                l = m
              }
              l = 0 <= l
            }
          }
          l && (b.uniform3f(this.e.k.poiPosition, h[0] * g + i[0], h[1] * g + i[1], h[2] * g + i[2]), this.Ba.A(this.e.attributes), this.fc++)
        }
      }
    }
    b.disable(b.BLEND)
  }
};
cb.push({Na:function(a) {
  return new eb(a.j)
}, Ma:function(a) {
  return"Point" == a
}});
function gb(a) {
  this.strokeColor = [1, 0, 0, 1];
  this.fillColor = [1, 0, 0, 1];
  this.ob = 1;
  this.Ab = "hotspot.png";
  this.label = this.zb = q;
  this.fill = u;
  this.Oc = 40;
  if(a) {
    for(var b in a) {
      this[b] = a[b]
    }
  }
}
;function hb(a, b) {
  this.f = b;
  this.style = a;
  this.s = this.i = q;
  this.b = [];
  this.t = [];
  this.K = [];
  this.gb = this.va = o;
  this.aa = this.v = q;
  this.yb = -1
}
v = hb.prototype;
v.Qb = function() {
  this.aa = [[], [], [], []];
  this.v = [q, q, q, q]
};
v.D = function(a) {
  for(var b = -1, c = 0;c < this.K.length;c++) {
    var d = this.K[c];
    if(d.hb == a) {
      this.b.splice(d.nb, d.cb);
      this.t.splice(d.Za, d.Cb);
      a = d.cb / 3;
      for(d = d.Za;d < this.t.length;d++) {
        this.t[d] -= a
      }
      b = c;
      break
    }
  }
  if(0 <= b) {
    this.gb = this.va = o;
    for(c = b + 1;c < this.K.length;c++) {
      d = this.K[c], d.nb -= this.K[b].cb, d.Za -= this.K[b].Cb
    }
    this.K.splice(b, 1);
    ib(this);
    this.aa = q;
    return o
  }
  return u
};
v.p = function(a, b) {
  var c = q, d = u;
  a._crossDateLine && 0 > b.ca.ha && (d = o);
  var e = a.geometry;
  "Polygon" == e.type ? (c = d ? e._negCoordinates[0] : e.coordinates[0], (c[0][0] != c[c.length - 1][0] || c[0][1] != c[c.length - 1][1]) && c.push(c[0])) : "LineString" == e.type && (c = d ? e._negCoordinates : e.coordinates);
  if(c != q) {
    for(var d = {hb:a, nb:this.b.length, Za:this.t.length, cb:0, Cb:0}, e = b.ca.Oa - b.ca.ha, f = b.ca.Ya - b.ca.pa, g = b.g.B, j = b.g.R, i = 0;i < c.length - 1;i++) {
      for(var h = (g - 1) * (c[i][0] - b.ca.ha) / e, l = (g - 1) * (c[i][1] - b.ca.pa) / f, m = (g - 1) * (c[i + 1][0] - b.ca.ha) / e, k = (g - 1) * (c[i + 1][1] - b.ca.pa) / f, n = Math.max(-1, Math.min(h, m)), p = Math.min(g - 1, Math.max(h, m)), r = Math.max(-1, Math.min(l, k)), t = Math.min(g - 1, Math.max(l, k)), s = [], n = Math.floor(n) + 1;n < Math.floor(p) + 1;n++) {
        var w = n, z = ta(h, l, m, k, w, 0, w, g - 1);
        if(0 < z[0] && 1 > z[0] && 0 < z[1] && 1 > z[1]) {
          var D = z[1] * (g - 1), w = Math.floor(D), B = D - w, A = j * (w * g + n), w = (1 - B) * b.b[A] + B * b.b[A + j * g], D = (1 - B) * b.b[A + 1] + B * b.b[A + j * g + 1], B = (1 - B) * b.b[A + 2] + B * b.b[A + j * g + 2];
          s.push([z[0], w, D, B])
        }
      }
      for(n = Math.floor(r) + 1;n < Math.floor(t) + 1;n++) {
        D = n, z = ta(h, l, m, k, 0, D, g - 1, D), 0 < z[0] && (1 > z[0] && 0 < z[1] && 1 > z[1]) && (w = z[1] * (g - 1), r = Math.floor(w), p = w - r, A = j * (n * g + r), w = (1 - p) * b.b[A] + p * b.b[A + j], D = (1 - p) * b.b[A + 1] + p * b.b[A + j + 1], B = (1 - p) * b.b[A + 2] + p * b.b[A + j + 2], s.push([z[0], w, D, B]))
      }
      s.sort(function(a, b) {
        return a[0] > b[0]
      });
      t = this.b.length / 3;
      0 < h && (h < g - 1 && 0 < l && l < g - 1) && (h = Oa(b, h, l), this.b.push(h[0]), this.b.push(h[1]), this.b.push(h[2]));
      for(n = 0;n < s.length;n++) {
        this.b.push(s[n][1]), this.b.push(s[n][2]), this.b.push(s[n][3])
      }
      0 < m && (m < g - 1 && 0 < k && k < g - 1) && (h = Oa(b, m, k), this.b.push(h[0]), this.b.push(h[1]), this.b.push(h[2]));
      m = this.b.length / 3;
      for(n = t;n < m - 1;n++) {
        this.t.push(n), this.t.push(n + 1)
      }
    }
    d.cb = this.b.length - d.nb;
    d.Cb = this.t.length - d.Za;
    return 0 < d.cb ? (this.K.push(d), this.gb = this.va = o, ib(this), this.aa = q, o) : u
  }
};
function ib(a) {
  var b = a.f;
  a.v && (a.v[0] && b.deleteBuffer(a.v[0]), a.v[1] && b.deleteBuffer(a.v[1]), a.v[2] && b.deleteBuffer(a.v[2]), a.v[3] && b.deleteBuffer(a.v[3]));
  a.v = q
}
v.J = function() {
  var a = this.f;
  this.s && a.deleteBuffer(this.s);
  this.i && a.deleteBuffer(this.i);
  ib(this);
  this.i = this.s = q
};
v.A = function(a) {
  var b = this.f;
  this.i == q && (this.i = b.createBuffer());
  b.bindBuffer(b.ARRAY_BUFFER, this.i);
  this.va && (b.bufferData(b.ARRAY_BUFFER, new Float32Array(this.b), b.STATIC_DRAW), this.va = u);
  b.vertexAttribPointer(a.vertex, 3, b.FLOAT, u, 0, 0);
  this.s == q && (this.s = b.createBuffer());
  b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, this.s);
  this.gb && (b.bufferData(b.ELEMENT_ARRAY_BUFFER, new Uint16Array(this.t), b.STATIC_DRAW), this.gb = u);
  b.drawElements(this.yb, this.t.length, b.UNSIGNED_SHORT, 0)
};
function jb(a, b) {
  hb.prototype.constructor.call(this, a, b);
  this.yb = b.LINES
}
ma(hb, jb);
jb.prototype.Qb = function() {
  this.aa = [[], [], [], []];
  this.v = [q, q, q, q];
  for(var a = 0;a < this.t.length / 2;a++) {
    var b = 3 * this.t[2 * a], c = 3 * this.t[2 * a + 1], d = this.b[b], e = this.b[c], f = 0;
    if(0 < d || 0 == d && 0 < e) {
      f = 1
    }
    b = this.b[b + 1];
    c = this.b[c + 1];
    d = 1;
    if(0 < b || 0 == b && 0 < c) {
      d = 0
    }
    this.aa[2 * d + f].push(this.t[2 * a]);
    this.aa[2 * d + f].push(this.t[2 * a + 1])
  }
};
cb.push({Na:function(a) {
  a = new kb(a.j);
  a.id = "lineString";
  a.ic = function(a, c) {
    return a.strokeColor[0] == c.strokeColor[0] && a.strokeColor[1] == c.strokeColor[1] && a.strokeColor[2] == c.strokeColor[2] && a.strokeColor[3] == c.strokeColor[3] && a.ob == c.ob
  };
  a.mb = jb;
  return a
}, Ma:function(a, b) {
  return"LineString" == a || "Polygon" == a && !b.fill
}});
function kb(a) {
  this.j = a;
  this.l = [{style:new gb, w:[]}];
  this.e = new Ka(this.j.a);
  La(this.e, "\tattribute vec3 vertex; \n\tuniform float zOffset; \n\tuniform mat4 modelViewMatrix;\n\tuniform mat4 projectionMatrix;\n\t\n\tvoid main(void)  \n\t{ \n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(vertex.x, vertex.y, vertex.z + zOffset, 1.0); \n\t} \n\t", "\t#ifdef GL_ES \n\tprecision highp float; \n\t#endif \n\tuniform vec4 color; \n\t\n\tvoid main(void) \n\t{ \n\t\tgl_FragColor = color; \n\t} \n\t");
  this.mb = this.ic = q;
  this.id = "empty"
}
kb.prototype.xb = function(a) {
  for(var b = 0;b < this.l.length;b++) {
    if(this.ic(a, this.l[b].style)) {
      return this.l[b]
    }
  }
  a = {style:a, w:[]};
  this.l.push(a);
  return a
};
function lb(a, b, c, d) {
  if(d.q[a.id]) {
    for(var e = d.q[a.id].X, f = 0;f < e.length;f++) {
      if(e[f].style == b && e[f].D(c) && d.children) {
        for(f = 0;4 > f;f++) {
          3 == d.children[f].state && lb(a, b, c, d.children[f])
        }
      }
    }
  }
}
kb.prototype.D = function(a) {
  for(var b = q, c = 0;c < this.l.length;c++) {
    var d = this.l[c].w.indexOf(a);
    -1 != d && (b = this.l[c].Dd, this.l[c].w.splice(d, 1))
  }
  if(b) {
    for(c = 0;c < this.j.z.length;c++) {
      lb(this, b, a, this.j.z[c])
    }
  }
};
kb.prototype.p = function(a, b) {
  var c = this.xb(b);
  c.w.push(a);
  for(var d = 0;d < this.j.z.length;d++) {
    var e = this.j.z[d];
    3 == e.state && mb(this, c.style, a, e)
  }
};
function mb(a, b, c, d) {
  var e = u, f;
  a: {
    if(d.q[a.id]) {
      f = d.q[a.id].X;
      for(var g = 0;g < f.length;g++) {
        if(f[g].style == b) {
          f = f[g];
          break a
        }
      }
    }
    f = q
  }
  f || (f = new a.mb(b, a.j.a.f), e = o);
  if(f.p(c, d) && d.children) {
    for(g = 0;4 > g;g++) {
      3 == d.children[g].state && mb(a, b, c, d.children[g])
    }
  }
  e && nb(a, d, f)
}
function ob() {
  this.X = []
}
ob.prototype.J = function() {
  for(var a = 0;a < this.X.length;a++) {
    this.X[a].J()
  }
};
function nb(a, b, c) {
  0 < c.b.length && (b.q[a.id] || (b.q[a.id] = new ob), b.q[a.id].X.push(c))
}
kb.prototype.ya = function(a) {
  if(a.parent) {
    for(var b = a.parent.q[this.id], c = b ? b.X.length : 0, d = 0;d < c;d++) {
      for(var e = b.X[d], f = new this.mb(e.style, this.j.a.f), g = 0;g < e.K.length;g++) {
        f.p(e.K[g].hb, a)
      }
      nb(this, a, f)
    }
  }else {
    for(d = 0;d < this.l.length;d++) {
      b = this.l[d];
      f = new this.mb(b.style, this.j.a.f);
      for(g = 0;g < b.w.length;g++) {
        f.p(b.w[g], a)
      }
      nb(this, a, f)
    }
  }
};
kb.prototype.A = function(a) {
  var b = this.j.a, c = b.f, d = G();
  this.e.apply();
  c.depthFunc(c.LEQUAL);
  c.uniformMatrix4fv(this.e.k.projectionMatrix, u, b.fa);
  for(var e = q, f = 0;f < a.length;++f) {
    var g = a[f];
    if(g.q[this.id]) {
      I(b.u, g.T, d);
      c.uniformMatrix4fv(this.e.k.modelViewMatrix, u, d);
      c.uniform1f(this.e.k.zOffset, 7E-4 * g.n);
      for(var j = g.q[this.id].X, i = 0;i < j.length;i++) {
        var h = j[i];
        h.style != e && (e = h.style, c.lineWidth(e.ob), c.uniform4f(this.e.k.color, e.strokeColor[0], e.strokeColor[1], e.strokeColor[2], e.strokeColor[3]));
        j[i].A(this.e.attributes)
      }
    }else {
      if(3 != g.state && g.parent.q[this.id]) {
        I(b.u, g.parent.T, d);
        c.uniformMatrix4fv(this.e.k.modelViewMatrix, u, d);
        c.uniform1f(this.e.k.zOffset, 7E-4 * g.parent.n);
        j = g.parent.q[this.id].X;
        for(i = 0;i < j.length;i++) {
          h = j[i];
          h.style != e && (e = h.style, c.lineWidth(e.ob), c.uniform4f(this.e.k.color, e.strokeColor[0], e.strokeColor[1], e.strokeColor[2], e.strokeColor[3]));
          var h = j[i], l = this.e.attributes, m = g.Ua;
          h.aa == q && h.Qb();
          var k = h.aa[m];
          if(0 != k.length) {
            var n = h.f;
            h.i == q && (h.i = n.createBuffer());
            n.bindBuffer(n.ARRAY_BUFFER, h.i);
            h.va && (n.bufferData(n.ARRAY_BUFFER, new Float32Array(h.b), n.STATIC_DRAW), h.va = u);
            n.vertexAttribPointer(l.vertex, 3, n.FLOAT, u, 0, 0);
            (l = h.v[m]) ? n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, l) : (n = h.f, l = n.createBuffer(), n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, l), n.bufferData(n.ELEMENT_ARRAY_BUFFER, new Uint16Array(k), n.STATIC_DRAW), h.v[m] = l);
            n.drawElements(h.yb, k.length, n.UNSIGNED_SHORT, 0)
          }
        }
      }
    }
  }
  c.depthFunc(c.LESS)
};
function Y(a) {
  this.style = a && a.style ? a.style : new gb;
  this.w = [];
  this.c = q;
  this.type = "Vector"
}
v = Y.prototype;
v.sa = function(a) {
  this.c = a;
  for(a = 0;a < this.w.length;a++) {
    pb(this, this.w[a])
  }
};
v.Nb = function() {
  for(var a = 0;a < this.w.length;a++) {
    this.c.Ja.D(this.w[a])
  }
  this.c = q
};
v.pc = function(a) {
  if(a = a.features) {
    for(var b = 0;b < a.length;b++) {
      this.p(a[b])
    }
  }
};
v.Tc = function(a) {
  if(a = a.features) {
    for(var b = 0;b < a.length;b++) {
      this.D(a[b])
    }
  }
};
function pb(a, b) {
  var c = b.geometry, d = a.style, e = b.properties;
  e && e.style && (d = e.style);
  if(e = "LineString" == c.type) {
    a: {
      for(var e = c.coordinates[0], f = e[0][0], g = 1;g < e.length;g++) {
        if(180 < Math.abs(e[g][0] - f)) {
          e = o;
          break a
        }
        coord = e[g]
      }
      e = u
    }
  }
  if(e) {
    b._crossDateLine = o;
    e = c.coordinates[0];
    for(f = 0;f < e.length;f++) {
      0 > e[f][0] && (e[f][0] += 360)
    }
    g = [];
    for(f = 0;f < e.length;f++) {
      g[f] = [e[f][0] - 360, e[f][1]]
    }
    c._negCoordinates = [g]
  }
  if("GeometryCollection" == c.type) {
    c = c.geometries;
    for(e = 0;e < c.length;e++) {
      f = {type:"Feature", properties:b.properties, geometry:c[e]}, f.properties.style = d, a.c.Ja.p(f, d)
    }
  }else {
    a.c.Ja.p(b, d)
  }
}
v.p = function(a) {
  var b = a.geometry;
  b && b.type && (this.w.push(a), this.c && (pb(this, a), M(this.c.a)))
};
v.D = function(a) {
  this.w.splice(this.w.indexOf(a), 1);
  this.c && (this.c.Ja.D(a), M(this.c.a))
};
v.Hc = function(a, b) {
  this.c.Ja.D(a);
  this.c.Ja.p(a, b)
};
function qb(a) {
  $a.prototype.constructor.call(this, a);
  this.qb = a.qb || 512;
  this.lc = new rb(a.ld || 3);
  this.Fb = a.Fb || 10;
  this.type = "ImageryRaster";
  this.Pb = a.baseUrl;
  this.na = new Image;
  var b = this;
  this.na.crossOrigin = "";
  this.na.onload = function() {
    b.Gb = o;
    a.gc && a.gc instanceof Function && a.gc(b);
    b.c && M(b.c.a)
  };
  this.na.onerror = function() {
    console.log("Cannot load " + b.na.src)
  };
  this.Gb = u;
  this.na.src = this.Pb + "/Norder3/Allsky.jpg"
}
ma($a, qb);
function Za(a, b) {
  var c = a.Pb, c = c + "/Norder" + b.N, c = c + "/Dir" + 1E4 * Math.floor(b.O / 1E4), c = c + "/Npix" + b.O;
  return c + ".jpg"
}
;function rb(a) {
  this.N = a;
  this.Ca = Math.pow(2, this.N)
}
function Ya(a, b, c) {
  Na.prototype.constructor.call(this);
  this.N = a;
  this.Ca = Math.pow(2, this.N);
  this.O = b;
  this.face = c;
  this.jc = [64 / 1728, 64 / 1856, this.O % 27 / 27, Math.floor(this.O / 27) / 29]
}
Ya.prototype = new Na;
function sb(a) {
  this.a = a.a;
  this.Da = [];
  this.e = new Ka(this.a);
  La(this.e, "\tattribute vec3 vertex;\n\tuniform mat4 viewProjectionMatrix;\n\t\n\tvoid main(void)\n\t{\n\t\tgl_Position = viewProjectionMatrix * vec4(vertex, 1.0);\n\t}\n\t", "\t#ifdef GL_ES \n\tprecision highp float; \n\t#endif \n\tuniform vec4 color; \n\t\n\tvoid main(void) \n\t{ \n\t\tgl_FragColor = color; \n\t} \n\t")
}
sb.prototype.p = function(a) {
  for(var b = {Ba:q, name:a.properties.name}, c = [], d = 0;d < a.geometry.coordinates.length / 3 - 1;d++) {
    c.push(d), c.push(d + 1)
  }
  c.push(d);
  c.push(0);
  for(var e = [], d = 0;d < a.geometry.coordinates.length;d += 3) {
    e = e.concat([a.geometry.coordinates[d], a.geometry.coordinates[d + 1], a.geometry.coordinates[d + 2]])
  }
  a = new Ha(this.a);
  Ja(a, c);
  Ia(a, e);
  a.mode = this.a.f.LINES;
  b.Ba = a;
  this.Da.push(b)
};
sb.prototype.D = function(a) {
  for(var b = 0;b < this.Da.length;b++) {
    this.Da[b].name == a.properties.name && this.Da.splice(b, 1)
  }
};
sb.prototype.A = function() {
  var a = this.a, b = a.f;
  b.disable(b.DEPTH_TEST);
  this.e.apply();
  I(a.fa, a.u, a.L);
  b.uniformMatrix4fv(this.e.k.viewProjectionMatrix, u, a.L);
  b.uniform4f(this.e.k.color, 0.03125, 0.23046875, 0.65625, 1);
  for(a = 0;a < this.Da.length;a++) {
    this.Da[a].Ba.A(this.e.attributes)
  }
  b.enable(b.DEPTH_TEST)
};
cb.push({Na:function(a) {
  return new sb(a.j)
}, Ma:function(a) {
  return"SimpleLineCollection" == a
}});
function Z(a) {
  this.c = a;
  this.Va = this.kb = this.jb = this.Rc = this.Qc = -1;
  this.wd = G();
  this.cc = 5E-4;
  this.bc = 1;
  this.pd = [0, 0, 0];
  this.I = [1, 0, 0];
  this.h = 1;
  this.heading = 0;
  this.bb = 90;
  this.mc = [0, 0, 1];
  this.$ = {};
  this.ta()
}
v = Z.prototype;
v.ad = function(a) {
  var b = this, c = this.c.a.canvas;
  c.addEventListener("mousedown", function(a) {
    a = a || window.event;
    b.Va = a.button;
    if(0 == a.button || 1 == a.button) {
      b.Qc = a.clientX, b.Rc = a.clientY, b.jb = a.clientX, b.kb = a.clientY, tb(b, "start")
    }
  }, u);
  document.addEventListener("mouseup", function(a) {
    a = a || window.event;
    b.Va = -1;
    (0 == a.button || 1 == a.button) && tb(b, "end")
  }, u);
  c.addEventListener("mousemove", function(a) {
    a = a || window.event;
    if(!(0 > b.Va)) {
      var c = a.clientX - b.jb, f = a.clientY - b.kb;
      if(0 == b.Va) {
        var f = a.clientX, g = a.clientY, c = Fa(b.c.a, b.jb, b.kb), f = Fa(b.c.a, f, g), g = [];
        y(f, c, g);
        x();
        y(b.I, g, b.I);
        b.ta();
        b.jb = a.clientX;
        b.kb = a.clientY;
        M(b.c.a)
      }else {
        1 == b.Va && (b.rotate(c, f), M(b.c.a))
      }
    }
  }, u);
  a && c.addEventListener("dblclick", function(a) {
    var c = a || window.event;
    if(0 == c.button) {
      var f = b.c.a, a = [];
      c.pageX || c.pageY ? (a[0] = c.pageX, a[1] = c.pageY) : (a[0] = c.clientX + document.body.scrollLeft + document.documentElement.scrollLeft, a[1] = c.clientY + document.body.scrollTop + document.documentElement.scrollTop);
      for(c = f.canvas;c;) {
        a[0] -= c.offsetLeft, a[1] -= c.offsetTop, c = c.offsetParent
      }
      (a = b.c.$b(a[0], a[1])) && b.nc(a, 0, 5E3, b.bb)
    }
  }, u);
  c.addEventListener("DOMMouseScroll", function(a) {
    ub(b, a || window.event)
  }, u);
  c.addEventListener("mousewheel", function(a) {
    ub(b, a || window.event)
  }, u)
};
v.dd = function(a, b) {
  this.$[a] ? this.$[a].push(b) : this.$[a] = [b]
};
v.fd = function(a, b) {
  if(this.$[a]) {
    var c = this.$[a].indexOf(b);
    -1 != c && this.$[a].splice(c, 1)
  }
};
function tb(a, b) {
  if(a.$[b]) {
    for(var c = a.$[b], d = 0;d < c.length;d++) {
      c[d]()
    }
  }
}
v.nc = function(a, b, c, d) {
  var e = this, b = d || 90, d = [];
  K.xa(this.I, d);
  var d = [d[0], d[1], this.h, this.bb], f = [a[0], a[1], 0.1, b], c = new wa(c, function(a) {
    var b = K.ba(a);
    e.I[0] = b[0];
    e.I[1] = b[1];
    e.I[2] = b[2];
    e.h = a[2];
    e.bb = a[3];
    e.ta()
  }), g = this.I, a = K.ba(a), a = y(g, a), a = fa(a), g = this.c.a.canvas, g = Math.min(45 * Math.PI / 180, 45 * g.width / g.height * Math.PI / 180), a = 0.5 * (a / 2 / Math.tan(g / 2));
  a > this.h ? (b = [0.5 * d[0] + 0.5 * f[0], 0.5 * d[1] + 0.5 * f[1], a, b], ya(c, 0, d, 0.5, b, function(a, b, c) {
    var d = a * a;
    return[b[0] + (c[0] - b[0]) * d, b[1] + (c[1] - b[1]) * d, b[2] + (c[2] - b[2]) * ra(a), b[3] + (c[3] - b[3]) * a]
  }), ya(c, 0.5, b, 1, f, function(a, b, c) {
    var d = ra(a);
    return[b[0] + (c[0] - b[0]) * d, b[1] + (c[1] - b[1]) * d, b[2] + (c[2] - b[2]) * a * a, b[3] + (c[3] - b[3]) * a]
  })) : ya(c, 0, d, 1, f, function(a, b, c) {
    var d = ra(a);
    return[b[0] + (c[0] - b[0]) * d, b[1] + (c[1] - b[1]) * d, b[2] + (c[2] - b[2]) * a * a, b[3] + (c[3] - b[3]) * a]
  });
  c.hc = function() {
    tb(e, "end")
  };
  c.c = this.c;
  c.start();
  tb(this, "start")
};
v.ta = function() {
  var a = [];
  F(this.I);
  var b = [];
  y(this.I, [0, 0, 0], b);
  E(b, 1 - this.h, a);
  b = this.c.a.u;
  ka(a, this.I, this.mc, b);
  this.mc = [b[1], b[5], b[9]]
};
function ub(a, b) {
  tb(a, "start");
  a.h = void 0 === b.wheelDelta ? a.h * (1 + 0.1 * b.detail) : a.h * (1 + 0.1 * (-b.wheelDelta / 120));
  a.h > a.bc && (a.h = a.bc);
  a.h < a.cc && (a.h = a.cc);
  a.ta();
  b.preventDefault && b.preventDefault();
  b.returnValue = u;
  tb(a, "end");
  M(a.c.a)
}
v.rotate = function(a, b) {
  this.heading += 0.1 * a;
  this.bb += 0.1 * b;
  this.ta()
};
var vb = [0, 1, 256, 257, 2, 3, 258, 259, 512, 513, 768, 769, 514, 515, 770, 771, 4, 5, 260, 261, 6, 7, 262, 263, 516, 517, 772, 773, 518, 519, 774, 775, 1024, 1025, 1280, 1281, 1026, 1027, 1282, 1283, 1536, 1537, 1792, 1793, 1538, 1539, 1794, 1795, 1028, 1029, 1284, 1285, 1030, 1031, 1286, 1287, 1540, 1541, 1796, 1797, 1542, 1543, 1798, 1799, 8, 9, 264, 265, 10, 11, 266, 267, 520, 521, 776, 777, 522, 523, 778, 779, 12, 13, 268, 269, 14, 15, 270, 271, 524, 525, 780, 781, 526, 527, 782, 783, 1032, 
1033, 1288, 1289, 1034, 1035, 1290, 1291, 1544, 1545, 1800, 1801, 1546, 1547, 1802, 1803, 1036, 1037, 1292, 1293, 1038, 1039, 1294, 1295, 1548, 1549, 1804, 1805, 1550, 1551, 1806, 1807, 2048, 2049, 2304, 2305, 2050, 2051, 2306, 2307, 2560, 2561, 2816, 2817, 2562, 2563, 2818, 2819, 2052, 2053, 2308, 2309, 2054, 2055, 2310, 2311, 2564, 2565, 2820, 2821, 2566, 2567, 2822, 2823, 3072, 3073, 3328, 3329, 3074, 3075, 3330, 3331, 3584, 3585, 3840, 3841, 3586, 3587, 3842, 3843, 3076, 3077, 3332, 3333, 3078, 
3079, 3334, 3335, 3588, 3589, 3844, 3845, 3590, 3591, 3846, 3847, 2056, 2057, 2312, 2313, 2058, 2059, 2314, 2315, 2568, 2569, 2824, 2825, 2570, 2571, 2826, 2827, 2060, 2061, 2316, 2317, 2062, 2063, 2318, 2319, 2572, 2573, 2828, 2829, 2574, 2575, 2830, 2831, 3080, 3081, 3336, 3337, 3082, 3083, 3338, 3339, 3592, 3593, 3848, 3849, 3594, 3595, 3850, 3851, 3084, 3085, 3340, 3341, 3086, 3087, 3342, 3343, 3596, 3597, 3852, 3853, 3598, 3599, 3854, 3855], wb = [2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4], xb = [1, 
3, 5, 7, 0, 2, 4, 6, 1, 3, 5, 7];
var Ta = {Ub:function(a) {
  var b = yb(zb(a), zb(0x5555555555555)), b = new Ab(b.oa | Bb(b, 15).oa, b.Ra | Bb(b, 15).Ra), a = yb(b, zb(65535)).oa, b = yb(Bb(b, 32), zb(65535)).oa;
  return vb[a & 255] | vb[a >>> 8] << 4 | vb[b & 255] << 16 | vb[b >>> 8] << 20
}, wc:function(a, b, c) {
  var d = wb[c] - a - b, e = 0, f = 0, g = 0, j = u;
  1 > d ? (f = d, d = f * f / 3, e = 1 - d, 0.99 < e && (g = Math.sqrt(d * (2 - d)), j = o)) : 3 < d ? (f = 4 - d, d = f * f / 3, e = d - 1, -0.99 > e && (g = Math.sqrt(d * (2 - d)), j = o)) : (f = 1, e = 2 * (2 - d) / 3);
  d = xb[c] * f + a - b;
  0 > d && (d += 8);
  8 <= d && (d -= 8);
  f = 1E-15 > f ? 0 : 0.7853981625 * d / f;
  a = j ? g : Math.sqrt((1 - e) * (1 + e));
  return[a * Math.cos(f), a * Math.sin(f), e]
}, xd:function(a) {
  for(var b = 0;65535 < a;) {
    b += 16, a >>>= 16
  }
  255 < a && (b |= 8, a >>>= 8);
  15 < a && (b |= 4, a >>>= 4);
  3 < a && (b |= 2, a >>>= 2);
  1 < a && (b |= 1);
  return b
}};
function Ab(a, b) {
  this.oa = a | 0;
  this.Ra = b | 0
}
var Cb = new Ab(0, 0);
function zb(a) {
  return isNaN(a) || !isFinite(a) ? Cb : new Ab(a % 4294967296 | 0, a / 4294967296 | 0)
}
function yb(a, b) {
  return new Ab(a.oa & b.oa, a.Ra & b.Ra)
}
function Bb(a, b) {
  b &= 63;
  if(0 == b) {
    return a
  }
  var c = a.Ra;
  return 32 > b ? new Ab(a.oa >>> b | c << 32 - b, c >>> b) : 32 == b ? new Ab(c, 0) : new Ab(c >>> b - 32, 0)
}
;window.GlobWeb = {};
window.GlobWeb.Globe = O;
window.GlobWeb.Stats = la;
window.GlobWeb.AstroNavigator = Z;
O.prototype.addLayer = O.prototype.qc;
O.prototype.removeLayer = O.prototype.Uc;
O.prototype.dispose = O.prototype.J;
O.prototype.getFrameNumber = O.prototype.qd;
O.prototype.getLonLatFromPixel = O.prototype.$b;
O.prototype.getViewportGeoBound = O.prototype.Bc;
O.prototype.setBaseImagery = O.prototype.Xc;
O.prototype.setBaseElevation = O.prototype.Wc;
O.prototype.setOption = O.prototype.Zc;
window.GlobWeb.HEALPixLayer = qb;
window.GlobWeb.CoordinateSystem = K;
window.GlobWeb.CoordinateSystem.fromEquatorialToGeo = K.Yb;
window.GlobWeb.CoordinateSystem.fromGeoTo3D = K.ba;
window.GlobWeb.CoordinateSystem.from3DToGeo = K.xa;
window.GlobWeb.CoordinateSystem.fromGeoToEquatorial = K.Zb;
window.GlobWeb.FeatureStyle = gb;
gb.prototype._attach = gb.sa;
window.GlobWeb.VectorRendererManager = ab;
ab.prototype.addFeature = ab.prototype.p;
window.GlobWeb.VectorLayer = Y;
Y.prototype.addFeature = Y.prototype.p;
Y.prototype.addFeatureCollection = Y.prototype.pc;
Y.prototype.modifyFeatureStyle = Y.prototype.Hc;
Y.prototype.removeFeature = Y.prototype.D;
Y.prototype.removeFeatureCollection = Y.prototype.Tc;
Y.prototype._attach = Y.prototype.sa;
Z.prototype.zoomTo = Z.prototype.nc;
Z.prototype.subscribe = Z.prototype.dd;
Z.prototype.unsubscribe = Z.prototype.fd;
Z.prototype.setupDefaultEventHandlers = Z.prototype.ad;
Z.prototype.computeViewMatrix = Z.prototype.ta;
window.GlobWeb.PathAnimation = W;
W.prototype.stop = W.prototype.stop;
W.prototype.start = W.prototype.start;
W.prototype.setAltitudeOffset = W.prototype.Vc;
W.prototype.setDirectionAngle = W.prototype.Yc;
W.prototype.setSpeed = W.prototype.$c;
window.GlobWeb.GeoBound = J;
J.prototype.getSouth = J.prototype.Ac;
J.prototype.getNorth = J.prototype.zc;
J.prototype.getEast = J.prototype.yc;
J.prototype.getWest = J.prototype.Cc;

